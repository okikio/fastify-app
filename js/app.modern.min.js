function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e,r){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&o(i,r.prototype),i}).apply(null,arguments)}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return s(t,arguments,i(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,t)})(t)}function u(t,e){try{var r=t()}catch(t){return e(t)}return r&&r.then?r.then(void 0,e):r}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var c;!function(t){t[t.off=0]="off",t[t.error=1]="error",t[t.warning=2]="warning",t[t.info=3]="info",t[t.debug=4]="debug"}(c||(c={}));var l=c.off,h=function(){function t(t){this.t=t}t.getLevel=function(){return l},t.setLevel=function(t){return l=c[t]};var e=t.prototype;return e.error=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.i(console.error,c.error,e)},e.warn=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.i(console.warn,c.warning,e)},e.info=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.i(console.info,c.info,e)},e.debug=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.i(console.log,c.debug,e)},e.i=function(e,r,n){r<=t.getLevel()&&e.apply(console,["["+this.t+"] "].concat(n))},t}(),f=S,p=b,d=y,m=w,g=x,v=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function y(t,e){for(var r,n=[],i=0,o=0,s="",a=e&&e.delimiter||"/",u=e&&e.whitelist||void 0,c=!1;null!==(r=v.exec(t));){var l=r[0],h=r[1],f=r.index;if(s+=t.slice(o,f),o=f+l.length,h)s+=h[1],c=!0;else{var p="",d=r[2],m=r[3],g=r[4],y=r[5];if(!c&&s.length){var b=s.length-1,w=s[b];(!u||u.indexOf(w)>-1)&&(p=w,s=s.slice(0,b))}s&&(n.push(s),s="",c=!1);var P=m||g,x=p||a;n.push({name:d||i++,prefix:p,delimiter:x,optional:"?"===y||"*"===y,repeat:"+"===y||"*"===y,pattern:P?k(P):"[^"+E(x===a?x:x+a)+"]+?"})}}return(s||o<t.length)&&n.push(s+t.substr(o)),n}function b(t,e){return function(r,n){var i=t.exec(r);if(!i)return!1;for(var o=i[0],s=i.index,a={},u=n&&n.decode||decodeURIComponent,c=1;c<i.length;c++)if(void 0!==i[c]){var l=e[c-1];a[l.name]=l.repeat?i[c].split(l.delimiter).map((function(t){return u(t,l)})):u(i[c],l)}return{path:o,index:s,params:a}}}function w(t,e){for(var r=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(r[n]=new RegExp("^(?:"+t[n].pattern+")$",P(e)));return function(e,n){for(var i="",o=n&&n.encode||encodeURIComponent,s=!n||!1!==n.validate,a=0;a<t.length;a++){var u=t[a];if("string"!=typeof u){var c,l=e?e[u.name]:void 0;if(Array.isArray(l)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but got array');if(0===l.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var h=0;h<l.length;h++){if(c=o(l[h],u),s&&!r[a].test(c))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'"');i+=(0===h?u.prefix:u.delimiter)+c}}else if("string"!=typeof l&&"number"!=typeof l&&"boolean"!=typeof l){if(!u.optional)throw new TypeError('Expected "'+u.name+'" to be '+(u.repeat?"an array":"a string"))}else{if(c=o(String(l),u),s&&!r[a].test(c))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but got "'+c+'"');i+=u.prefix+c}}else i+=u}return i}}function E(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function k(t){return t.replace(/([=!:$/()])/g,"\\$1")}function P(t){return t&&t.sensitive?"":"i"}function x(t,e,r){for(var n=(r=r||{}).strict,i=!1!==r.start,o=!1!==r.end,s=r.delimiter||"/",a=[].concat(r.endsWith||[]).map(E).concat("$").join("|"),u=i?"^":"",c=0;c<t.length;c++){var l=t[c];if("string"==typeof l)u+=E(l);else{var h=l.repeat?"(?:"+l.pattern+")(?:"+E(l.delimiter)+"(?:"+l.pattern+"))*":l.pattern;e&&e.push(l),u+=l.optional?l.prefix?"(?:"+E(l.prefix)+"("+h+"))?":"("+h+")?":E(l.prefix)+"("+h+")"}}if(o)n||(u+="(?:"+E(s)+")?"),u+="$"===a?"$":"(?="+a+")";else{var f=t[t.length-1],p="string"==typeof f?f[f.length-1]===s:void 0===f;n||(u+="(?:"+E(s)+"(?="+a+"))?"),p||(u+="(?="+E(s)+"|"+a+")")}return new RegExp(u,P(r))}function S(t,e,r){return t instanceof RegExp?function(t,e){if(!e)return t;var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,r){for(var n=[],i=0;i<t.length;i++)n.push(S(t[i],e,r).source);return new RegExp("(?:"+n.join("|")+")",P(r))}(t,e,r):function(t,e,r){return x(y(t,r),e,r)}(t,e,r)}f.match=function(t,e){var r=[];return b(S(t,r,e),r)},f.regexpToFunction=p,f.parse=d,f.compile=function(t,e){return w(y(t,e),e)},f.tokensToFunction=m,f.tokensToRegExp=g;var A={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},j=new(function(){function t(){this.o=A,this.u=new DOMParser}var e=t.prototype;return e.toString=function(t){return t.outerHTML},e.toDocument=function(t){return this.u.parseFromString(t,"text/html")},e.toElement=function(t){var e=document.createElement("div");return e.innerHTML=t,e},e.getHtml=function(t){return void 0===t&&(t=document),this.toString(t.documentElement)},e.getWrapper=function(t){return void 0===t&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},e.getContainer=function(t){return void 0===t&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},e.removeContainer=function(t){document.body.contains(t)&&t.parentNode.removeChild(t)},e.addContainer=function(t,e){var r=this.getContainer();r?this.s(t,r):e.appendChild(t)},e.getNamespace=function(t){void 0===t&&(t=document);var e=t.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return e?e.getAttribute(this.o.prefix+"-"+this.o.namespace):null},e.getHref=function(t){if(t.tagName&&"a"===t.tagName.toLowerCase()){if("string"==typeof t.href)return t.href;var e=t.getAttribute("href")||t.getAttribute("xlink:href");if(e)return this.resolveUrl(e.baseVal||e)}return null},e.resolveUrl=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e.length;if(0===n)throw new Error("resolveUrl requires at least one argument; got none.");var i=document.createElement("base");if(i.href=arguments[0],1===n)return i.href;var o=document.getElementsByTagName("head")[0];o.insertBefore(i,o.firstChild);for(var s,a=document.createElement("a"),u=1;u<n;u++)a.href=arguments[u],i.href=s=a.href;return o.removeChild(i),s},e.s=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},t}()),_=new(function(){function t(){this.h=[],this.v=-1}var n=t.prototype;return n.init=function(t,e){this.l="barba";var r={ns:e,scroll:{x:window.scrollX,y:window.scrollY},url:t};this.h.push(r),this.v=0;var n={from:this.l,index:0,states:[].concat(this.h)};window.history&&window.history.replaceState(n,"",t)},n.change=function(t,e,r){if(r&&r.state){var n=r.state,i=n.index;e=this.m(this.v-i),this.replace(n.states),this.v=i}else this.add(t,e);return e},n.add=function(t,e){var r=this.size,n=this.p(e),i={ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:t};this.h.push(i),this.v=r;var o={from:this.l,index:r,states:[].concat(this.h)};switch(n){case"push":window.history&&window.history.pushState(o,"",t);break;case"replace":window.history&&window.history.replaceState(o,"",t)}},n.update=function(t,e){var n=e||this.v,i=r({},this.get(n),{},t);this.set(n,i)},n.remove=function(t){t?this.h.splice(t,1):this.h.pop(),this.v--},n.clear=function(){this.h=[],this.v=-1},n.replace=function(t){this.h=t},n.get=function(t){return this.h[t]},n.set=function(t,e){return this.h[t]=e},n.p=function(t){var e="push",r=t,n=A.prefix+"-"+A.history;return r.hasAttribute&&r.hasAttribute(n)&&(e=r.getAttribute(n)),e},n.m=function(t){return Math.abs(t)>1?t>0?"forward":"back":0===t?"popstate":t>0?"back":"forward"},e(t,[{key:"current",get:function(){return this.h[this.v]}},{key:"state",get:function(){return this.h[this.h.length-1]}},{key:"previous",get:function(){return this.v<1?null:this.h[this.v-1]}},{key:"size",get:function(){return this.h.length}}]),t}()),O=function(t,e){try{var r=function(){if(!e.next.html)return Promise.resolve(t).then((function(t){var r=e.next;if(t){var n=j.toElement(t);r.namespace=j.getNamespace(n),r.container=j.getContainer(n),r.html=t,_.update({ns:r.namespace});var i=j.toDocument(t);document.title=i.title}}))}();return Promise.resolve(r&&r.then?r.then((function(){})):void 0)}catch(t){return Promise.reject(t)}},C=f,T={__proto__:null,update:O,nextTick:function(){return new Promise((function(t){window.requestAnimationFrame(t)}))},pathToRegexp:C},L=function(){return window.location.origin},N=function(t){return void 0===t&&(t=window.location.href),q(t).port},q=function(t){var e,r=t.match(/:\d+/);if(null===r)/^http/.test(t)&&(e=80),/^https/.test(t)&&(e=443);else{var n=r[0].substring(1);e=parseInt(n,10)}var i,o=t.replace(L(),""),s={},a=o.indexOf("#");a>=0&&(i=o.slice(a+1),o=o.slice(0,a));var u=o.indexOf("?");return u>=0&&(s=R(o.slice(u+1)),o=o.slice(0,u)),{hash:i,path:o,port:e,query:s}},R=function(t){return t.split("&").reduce((function(t,e){var r=e.split("=");return t[r[0]]=r[1],t}),{})},M=function(t){return void 0===t&&(t=window.location.href),t.replace(/(\/#.*|\/|#.*)$/,"")},z={__proto__:null,getHref:function(){return window.location.href},getOrigin:L,getPort:N,getPath:function(t){return void 0===t&&(t=window.location.href),q(t).path},parse:q,parseQuery:R,clean:M};function $(t,e,r){return void 0===e&&(e=2e3),new Promise((function(n,i){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE)if(200===o.status)n(o.responseText);else if(o.status){var e={status:o.status,statusText:o.statusText};r(t,e),i(e)}},o.ontimeout=function(){var n=new Error("Timeout error ["+e+"]");r(t,n),i(n)},o.onerror=function(){var e=new Error("Fetch error");r(t,e),i(e)},o.open("GET",t),o.timeout=e,o.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),o.setRequestHeader("x-barba","yes"),o.send()}))}var D=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then};function H(t,e){return void 0===e&&(e={}),function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=!1,s=new Promise((function(r,i){e.async=function(){return o=!0,function(t,e){t?i(t):r(e)}};var s=t.apply(e,n);o||(D(s)?s.then(r,i):r(s))}));return s}}var F=new(function(t){function e(){var e;return(e=t.call(this)||this).logger=new h("@barba/core"),e.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],e.registered=new Map,e.init(),e}n(e,t);var r=e.prototype;return r.init=function(){var t=this;this.registered.clear(),this.all.forEach((function(e){t[e]||(t[e]=function(r,n){t.registered.has(e)||t.registered.set(e,new Set),t.registered.get(e).add({ctx:n||{},fn:r})})}))},r.do=function(t){for(var e=this,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(this.registered.has(t)){var o=Promise.resolve();return this.registered.get(t).forEach((function(t){o=o.then((function(){return H(t.fn,t.ctx).apply(void 0,n)}))})),o.catch((function(r){e.logger.debug("Hook error ["+t+"]"),e.logger.error(r)}))}return Promise.resolve()},r.clear=function(){var t=this;this.all.forEach((function(e){delete t[e]})),this.init()},r.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var t=[];this.registered.forEach((function(e,r){return t.push(r)})),this.logger.info("Registered hooks: "+t.join(","))},e}((function(){}))),B=function(){function t(t){if(this.P=[],"boolean"==typeof t)this.g=t;else{var e=Array.isArray(t)?t:[t];this.P=e.map((function(t){return C(t)}))}}return t.prototype.checkHref=function(t){if("boolean"==typeof this.g)return this.g;var e=q(t).path;return this.P.some((function(t){return null!==t.exec(e)}))},t}(),I=function(t){function e(e){var r;return(r=t.call(this,e)||this).k=new Map,r}n(e,t);var i=e.prototype;return i.set=function(t,e,r){return this.k.set(t,{action:r,request:e}),{action:r,request:e}},i.get=function(t){return this.k.get(t)},i.getRequest=function(t){return this.k.get(t).request},i.getAction=function(t){return this.k.get(t).action},i.has=function(t){return!this.checkHref(t)&&this.k.has(t)},i.delete=function(t){return this.k.delete(t)},i.update=function(t,e){var n=r({},this.k.get(t),{},e);return this.k.set(t,n),n},e}(B),U=function(){return!window.history.pushState},V=function(t){return!t.el||!t.href},X=function(t){var e=t.event;return e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey},W=function(t){var e=t.el;return e.hasAttribute("target")&&"_blank"===e.target},J=function(t){var e=t.el;return void 0!==e.protocol&&window.location.protocol!==e.protocol||void 0!==e.hostname&&window.location.hostname!==e.hostname},Y=function(t){var e=t.el;return void 0!==e.port&&N()!==N(e.href)},K=function(t){var e=t.el;return e.getAttribute&&"string"==typeof e.getAttribute("download")},Q=function(t){return t.el.hasAttribute(A.prefix+"-"+A.prevent)},G=function(t){return Boolean(t.el.closest("["+A.prefix+"-"+A.prevent+'="all"]'))},Z=function(t){var e=t.href;return M(e)===M()&&N(e)===N()},tt=function(t){function e(e){var r;return(r=t.call(this,e)||this).suite=[],r.tests=new Map,r.init(),r}n(e,t);var r=e.prototype;return r.init=function(){this.add("pushState",U),this.add("exists",V),this.add("newTab",X),this.add("blank",W),this.add("corsDomain",J),this.add("corsPort",Y),this.add("download",K),this.add("preventSelf",Q),this.add("preventAll",G),this.add("sameUrl",Z,!1)},r.add=function(t,e,r){void 0===r&&(r=!0),this.tests.set(t,e),r&&this.suite.push(t)},r.run=function(t,e,r,n){return this.tests.get(t)({el:e,event:r,href:n})},r.checkLink=function(t,e,r){var n=this;return this.suite.some((function(i){return n.run(i,t,e,r)}))},e}(B),et=function(t){function e(r,n){var i;void 0===n&&(n="Barba error");for(var o=arguments.length,s=new Array(o>2?o-2:0),a=2;a<o;a++)s[a-2]=arguments[a];return(i=t.call.apply(t,[this].concat(s))||this).error=r,i.label=n,Error.captureStackTrace&&Error.captureStackTrace(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i),e),i.name="BarbaError",i}return n(e,t),e}(a(Error)),rt=function(){function t(t){void 0===t&&(t=[]),this.logger=new h("@barba/core"),this.all=[],this.page=[],this.once=[],this.A=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],t&&(this.all=this.all.concat(t)),this.update()}var e=t.prototype;return e.add=function(t,e){switch(t){case"rule":this.A.splice(e.position||0,0,e.value);break;case"transition":default:this.all.push(e)}this.update()},e.resolve=function(t,e){var r=this;void 0===e&&(e={});var n=e.once?this.once:this.page;n=n.filter(e.self?function(t){return t.name&&"self"===t.name}:function(t){return!t.name||"self"!==t.name});var i=new Map,o=n.find((function(n){var o=!0,s={};return!(!e.self||"self"!==n.name)||(r.A.reverse().forEach((function(e){o&&(o=r.R(n,e,t,s),n.from&&n.to&&(o=r.R(n,e,t,s,"from")&&r.R(n,e,t,s,"to")),n.from&&!n.to&&(o=r.R(n,e,t,s,"from")),!n.from&&n.to&&(o=r.R(n,e,t,s,"to")))})),i.set(n,s),o)})),s=i.get(o),a=[];if(a.push(e.once?"once":"page"),e.self&&a.push("self"),s){var u,c=[o];Object.keys(s).length>0&&c.push(s),(u=this.logger).info.apply(u,["Transition found ["+a.join(",")+"]"].concat(c))}else this.logger.info("No transition found ["+a.join(",")+"]");return o},e.update=function(){var t=this;this.all=this.all.map((function(e){return t.T(e)})).sort((function(t,e){return t.priority-e.priority})).reverse().map((function(t){return delete t.priority,t})),this.page=this.all.filter((function(t){return void 0!==t.leave||void 0!==t.enter})),this.once=this.all.filter((function(t){return void 0!==t.once}))},e.R=function(t,e,r,n,i){var o=!0,s=!1,a=t,u=e.name,c=u,l=u,h=u,f=i?a[i]:a,p="to"===i?r.next:r.current;if(i?f&&f[u]:f[u]){switch(e.type){case"strings":default:var d=Array.isArray(f[c])?f[c]:[f[c]];p[c]&&-1!==d.indexOf(p[c])&&(s=!0),-1===d.indexOf(p[c])&&(o=!1);break;case"object":var m=Array.isArray(f[l])?f[l]:[f[l]];p[l]?(p[l].name&&-1!==m.indexOf(p[l].name)&&(s=!0),-1===m.indexOf(p[l].name)&&(o=!1)):o=!1;break;case"function":f[h](r)?s=!0:o=!1}s&&(i?(n[i]=n[i]||{},n[i][u]=a[i][u]):n[u]=a[u])}return o},e.O=function(t,e,r){var n=0;return(t[e]||t.from&&t.from[e]||t.to&&t.to[e])&&(n+=Math.pow(10,r),t.from&&t.from[e]&&(n+=1),t.to&&t.to[e]&&(n+=2)),n},e.T=function(t){var e=this;t.priority=0;var r=0;return this.A.forEach((function(n,i){r+=e.O(t,n.name,i+1)})),t.priority=r,t},t}(),nt=function(){function t(t){void 0===t&&(t=[]),this.logger=new h("@barba/core"),this.S=!1,this.store=new rt(t)}var r=t.prototype;return r.get=function(t,e){return this.store.resolve(t,e)},r.doOnce=function(t){var e=t.data,r=t.transition;try{var n=function(){i.S=!1},i=this,o=r||{};i.S=!0;var s=u((function(){return Promise.resolve(i.j("beforeOnce",e,o)).then((function(){return Promise.resolve(i.once(e,o)).then((function(){return Promise.resolve(i.j("afterOnce",e,o)).then((function(){}))}))}))}),(function(t){i.S=!1,i.logger.debug("Transition error [before/after/once]"),i.logger.error(t)}));return Promise.resolve(s&&s.then?s.then(n):n())}catch(t){return Promise.reject(t)}},r.doPage=function(t){var e=t.data,r=t.transition,n=t.page,i=t.wrapper;try{var o=function(t){if(s)return t;a.S=!1},s=!1,a=this,c=r||{},l=!0===c.sync||!1;a.S=!0;var h=u((function(){function t(){return Promise.resolve(a.j("before",e,c)).then((function(){function t(t){return Promise.resolve(a.remove(e)).then((function(){return Promise.resolve(a.j("after",e,c)).then((function(){}))}))}var r=function(){if(l)return u((function(){return Promise.resolve(a.add(e,i)).then((function(){return Promise.resolve(a.j("beforeLeave",e,c)).then((function(){return Promise.resolve(a.j("beforeEnter",e,c)).then((function(){return Promise.resolve(Promise.all([a.leave(e,c),a.enter(e,c)])).then((function(){return Promise.resolve(a.j("afterLeave",e,c)).then((function(){return Promise.resolve(a.j("afterEnter",e,c)).then((function(){}))}))}))}))}))}))}),(function(t){if(a.M(t))throw new et(t,"Transition error [sync]")}));var t=function(t){return u((function(){var t=function(){if(!1!==r)return Promise.resolve(a.add(e,i)).then((function(){return Promise.resolve(a.j("beforeEnter",e,c)).then((function(){return Promise.resolve(a.enter(e,c,r)).then((function(){return Promise.resolve(a.j("afterEnter",e,c)).then((function(){}))}))}))}))}();if(t&&t.then)return t.then((function(){}))}),(function(t){if(a.M(t))throw new et(t,"Transition error [before/after/enter]")}))},r=!1,o=u((function(){return Promise.resolve(a.j("beforeLeave",e,c)).then((function(){return Promise.resolve(Promise.all([a.leave(e,c),O(n,e)]).then((function(t){return t[0]}))).then((function(t){return r=t,Promise.resolve(a.j("afterLeave",e,c)).then((function(){}))}))}))}),(function(t){if(a.M(t))throw new et(t,"Transition error [before/after/leave]")}));return o&&o.then?o.then(t):t()}();return r&&r.then?r.then(t):t()}))}var r=function(){if(l)return Promise.resolve(O(n,e)).then((function(){}))}();return r&&r.then?r.then(t):t()}),(function(t){if(a.S=!1,t.name&&"BarbaError"===t.name)throw a.logger.debug(t.label),a.logger.error(t.error),t;throw a.logger.debug("Transition error [page]"),a.logger.error(t),t}));return Promise.resolve(h&&h.then?h.then(o):o(h))}catch(t){return Promise.reject(t)}},r.once=function(t,e){try{return Promise.resolve(F.do("once",t,e)).then((function(){return e.once?H(e.once,e)(t):Promise.resolve()}))}catch(t){return Promise.reject(t)}},r.leave=function(t,e){try{return Promise.resolve(F.do("leave",t,e)).then((function(){return e.leave?H(e.leave,e)(t):Promise.resolve()}))}catch(t){return Promise.reject(t)}},r.enter=function(t,e,r){try{return Promise.resolve(F.do("enter",t,e)).then((function(){return e.enter?H(e.enter,e)(t,r):Promise.resolve()}))}catch(t){return Promise.reject(t)}},r.add=function(t,e){try{return j.addContainer(t.next.container,e),F.do("nextAdded",t),Promise.resolve()}catch(t){return Promise.reject(t)}},r.remove=function(t){try{return j.removeContainer(t.current.container),F.do("currentRemoved",t),Promise.resolve()}catch(t){return Promise.reject(t)}},r.M=function(t){return t.message?!/Timeout error|Fetch error/.test(t.message):!t.status},r.j=function(t,e,r){try{return Promise.resolve(F.do(t,e,r)).then((function(){return r[t]?H(r[t],r)(e):Promise.resolve()}))}catch(t){return Promise.reject(t)}},e(t,[{key:"isRunning",get:function(){return this.S},set:function(t){this.S=t}},{key:"hasOnce",get:function(){return this.store.once.length>0}},{key:"hasSelf",get:function(){return this.store.all.some((function(t){return"self"===t.name}))}},{key:"shouldWait",get:function(){return this.store.all.some((function(t){return t.to&&!t.to.route||t.sync}))}}]),t}(),it=function(){function t(t){var e=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,0!==t.length&&(t.forEach((function(t){e.byNamespace.set(t.namespace,t)})),this.names.forEach((function(t){F[t](e.L(t))})))}return t.prototype.L=function(t){var e=this;return function(r){var n=t.match(/enter/i)?r.next:r.current,i=e.byNamespace.get(n.namespace);return i&&i[t]?H(i[t],i)(r):Promise.resolve()}},t}();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var ot={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}},st=new(function(){function t(){this.version="2.9.7",this.schemaPage=ot,this.Logger=h,this.logger=new h("@barba/core"),this.plugins=[],this.hooks=F,this.dom=j,this.helpers=T,this.history=_,this.request=$,this.url=z}var n=t.prototype;return n.use=function(t,e){var r=this.plugins;r.indexOf(t)>-1?this.logger.warn("Plugin ["+t.name+"] already installed."):"function"==typeof t.install?(t.install(this,e),r.push(t)):this.logger.warn("Plugin ["+t.name+'] has no "install" method.')},n.init=function(t){var e=void 0===t?{}:t,n=e.transitions,i=void 0===n?[]:n,o=e.views,s=void 0===o?[]:o,a=e.schema,u=void 0===a?A:a,c=e.requestError,l=e.timeout,f=void 0===l?2e3:l,p=e.cacheIgnore,d=void 0!==p&&p,m=e.prefetchIgnore,g=void 0!==m&&m,v=e.preventRunning,y=void 0!==v&&v,b=e.prevent,w=void 0===b?null:b,E=e.debug,k=e.logLevel;if(h.setLevel(!0===(void 0!==E&&E)?"debug":void 0===k?"off":k),this.logger.info(this.version),Object.keys(u).forEach((function(t){A[t]&&(A[t]=u[t])})),this.$=c,this.timeout=f,this.cacheIgnore=d,this.prefetchIgnore=g,this.preventRunning=y,this._=this.dom.getWrapper(),!this._)throw new Error("[@barba/core] No Barba wrapper found");this._.setAttribute("aria-live","polite"),this.q();var P=this.data.current;if(!P.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new I(d),this.prevent=new tt(g),this.transitions=new nt(i),this.views=new it(s),null!==w){if("function"!=typeof w)throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",w)}this.history.init(P.url.href,P.namespace),this.B=this.B.bind(this),this.U=this.U.bind(this),this.D=this.D.bind(this),this.F(),this.plugins.forEach((function(t){return t.init()}));var x=this.data;x.trigger="barba",x.next=x.current,x.current=r({},this.schemaPage),this.hooks.do("ready",x),this.once(x),this.q()},n.destroy=function(){this.q(),this.H(),this.history.clear(),this.hooks.clear(),this.plugins=[]},n.force=function(t){window.location.assign(t)},n.go=function(t,e,r){var n;if(void 0===e&&(e="barba"),this.transitions.isRunning)this.force(t);else if(!(n="popstate"===e?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(t):this.prevent.run("sameUrl",null,null,t))||this.transitions.hasSelf)return e=this.history.change(t,e,r),r&&(r.stopPropagation(),r.preventDefault()),this.page(t,e,n)},n.once=function(t){try{var e=this;return Promise.resolve(e.hooks.do("beforeEnter",t)).then((function(){function r(){return Promise.resolve(e.hooks.do("afterEnter",t)).then((function(){}))}var n=function(){if(e.transitions.hasOnce){var r=e.transitions.get(t,{once:!0});return Promise.resolve(e.transitions.doOnce({transition:r,data:t})).then((function(){}))}}();return n&&n.then?n.then(r):r()}))}catch(t){return Promise.reject(t)}},n.page=function(t,e,n){try{var i=function(){var t=o.data;return Promise.resolve(o.hooks.do("page",t)).then((function(){var e=u((function(){var e=o.transitions.get(t,{once:!1,self:n});return Promise.resolve(o.transitions.doPage({data:t,page:s,transition:e,wrapper:o._})).then((function(){o.q()}))}),(function(){0===h.getLevel()&&o.force(t.current.url.href)}));if(e&&e.then)return e.then((function(){}))}))},o=this;o.data.next.url=r({href:t},o.url.parse(t)),o.data.trigger=e;var s=o.cache.has(t)?o.cache.update(t,{action:"click"}).request:o.cache.set(t,o.request(t,o.timeout,o.onRequestError.bind(o,e)),"click").request,a=function(){if(o.transitions.shouldWait)return Promise.resolve(O(s,o.data)).then((function(){}))}();return Promise.resolve(a&&a.then?a.then(i):i())}catch(t){return Promise.reject(t)}},n.onRequestError=function(t){this.transitions.isRunning=!1;for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=r[0],o=r[1],s=this.cache.getAction(i);return this.cache.delete(i),!(this.$&&!1===this.$(t,s,i,o)||("click"===s&&this.force(i),1))},n.prefetch=function(t){var e=this;this.cache.has(t)||this.cache.set(t,this.request(t,this.timeout,this.onRequestError.bind(this,"barba")).catch((function(t){e.logger.error(t)})),"prefetch")},n.F=function(){!0!==this.prefetchIgnore&&(document.addEventListener("mouseover",this.B),document.addEventListener("touchstart",this.B)),document.addEventListener("click",this.U),window.addEventListener("popstate",this.D)},n.H=function(){!0!==this.prefetchIgnore&&(document.removeEventListener("mouseover",this.B),document.removeEventListener("touchstart",this.B)),document.removeEventListener("click",this.U),window.removeEventListener("popstate",this.D)},n.B=function(t){var e=this,r=this.I(t);if(r){var n=this.dom.getHref(r);this.prevent.checkHref(n)||this.cache.has(n)||this.cache.set(n,this.request(n,this.timeout,this.onRequestError.bind(this,r)).catch((function(t){e.logger.error(t)})),"enter")}},n.U=function(t){var e=this.I(t);if(e)return this.transitions.isRunning&&this.preventRunning?(t.preventDefault(),void t.stopPropagation()):void this.go(this.dom.getHref(e),e,t)},n.D=function(t){this.go(this.url.getHref(),"popstate",t)},n.I=function(t){for(var e=t.target;e&&!this.dom.getHref(e);)e=e.parentNode;if(e&&!this.prevent.checkLink(e,t,this.dom.getHref(e)))return e},n.q=function(){var t=this.url.getHref(),e={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:r({href:t},this.url.parse(t))};this.C={current:e,next:r({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},e(t,[{key:"data",get:function(){return this.C}},{key:"wrapper",get:function(){return this._}}]),t}());let{assign:at,keys:ut,values:ct}=Object,{isArray:lt,from:ht,of:ft}=Array,pt=t=>t[0].toUpperCase()+t.slice(1),dt=(t,e)=>typeof t===e,mt=(t,e)=>t instanceof e,gt=t=>e=>dt(e,t);at(dt,{el:t=>mt(t,Element)||mt(t,Document),arrlike(t){let e=dt(t.length,"number")&&t.length;return 0===e||e>0&&e-1 in t},num:t=>!isNaN(t)&&gt("number")(t),class:t=>t&&t._method&&t._class,not:(t,...e)=>!dt[t](...e),doc:t=>mt(t,Document),def:t=>!dt(t,"undefined"),win:t=>t&&t.window,undef:gt("undefined"),bool:gt("boolean"),fn:gt("function"),str:gt("string"),obj:gt("object"),nul:t=>null===t,inst:mt,arr:lt,_type:gt});let vt=(t,e,r)=>dt.not("fn",t)||ut(t.prototype||{}).length>0?t:t.apply(r,e),yt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,bt=/(?:^|,)\s*([^\s,=]+)/g,wt=t=>{let e=t.toString().replace(yt,""),r=e.slice(e.indexOf("(")+1,e.indexOf(")")).match(bt),n=[];if(dt.nul(r))return[];for(let t=0;t<r.length;t++)n.push(r[t].replace(/[\s,]/g,""));return n},Et=(t,e,r)=>(e=e.toString().split(/[.,]/g),dt.def(r)?(e.length>1?Et(t[e.shift()],e,r):t[e[0]]=r,r):(e.forEach((e=>{t=t[e]})),t)),kt=(t,e,r)=>dt.obj(e)&&dt.not("arr",e)?at(t,e):dt.arr(e)?dt.undef(r)?e.map((e=>Et(t,e))):(e.forEach((e=>{Et(t,e,r)})),t):Et(t,e,r),Pt=(t,e)=>{if(dt.undef(t))return;let r=t.matches||t.msMatchesSelector||t.webkitMatchesSelector;return r?r.call(t,e):void 0},xt=function(t,e){let r=function(){return t.apply(this,e)};return r.prototype=t.prototype,new r},St=function(t){let e="prototype"===t;return function(t,...r){let n=t.SuperClass&&t.SuperClass.prototype;return r.forEach((function(r){let i=vt(r,[t,t.constructor],t.prototype);ut(i).forEach((function(r){let o=i[r],s=o,a={enumerable:!0,configurable:!0};dt.fn(s)&&(n&&"$super"===wt(s)[0]&&(o=function(...t){let e=n[r].bind(this);return s.call(this,e,...t)}),o.valueOf=s.valueOf.bind(s),o.toString=s.toString.bind(s)),dt.def(o)&&dt.obj(o)&&o.$$prop?at(a,{set(t){Object.defineProperty(this,r,{value:t})},get(){return this[r]}},((t,e)=>{let r=at({},e);return t.forEach((t=>delete r[t])),r})(["$$prop"],o)):at(a,{writable:!0,value:o}),Object.defineProperty(e?t.prototype:t,r,a)}))})),t}},At=St("prototype"),jt=St("static"),_t=function(t={},e){let r,n=e&&e.thisArg||[],i=e&&e.chain||[],o={};for(let s in t){let a,u=t[s];dt.fn(u)&&(o[s]=function(...t){return dt.fn(e)?e.call(this,u,...t):(r=n.includes(s)?[this,...t]:t,i.includes(s)?(u.apply(this,r),this):u.apply(this,r))},a=u.toString.bind(u),o[s].toString=i.includes(s)?()=>a()+" return this;":a,o[s].valueOf=u.valueOf.bind(u))}return o},Ot=function(t="get",e="function"){return r=>{let n=r;return"function"===e&&(n=Function("with (this) return "+r),n.toString=r.toString),{$$prop:!0,[t]:n}}},Ct=Ot("get","function"),Tt=Ot("set","function"),Lt=function(t,e,...r){let n=null,i=t,o=i,s=o.SuperClass;for(;s;){let t=s.prototype[e];if(i[e]!==t){n=t;break}i=s.prototype,o=i.constructor,s=o.SuperClass}if(n)return n.apply(t,r);console.error(e+" method not found in prototype chain.")},Nt={fnval:vt,argNames:wt,method:At,static:jt,path:Et,attr:kt,alias:_t,new:xt,callsuper:Lt},qt={_is:dt,_fnval:vt,_argNames:wt,_method:At,_static:jt,_path:Et,_attr:kt,_alias:_t,_configAttr:Ot,_get:Ct,_set:Tt,_new:xt,_callsuper:Lt,assign:at,keys:ut};qt=ut(qt).reduce((function(t,e){return"_"===e.charAt(0)&&(t[e.slice(1)]=qt[e]),t}),qt);let Rt=_t(Nt,(function(t,...e){return t.apply(this,[this,...e])})),Mt=function(...t){let e,r,n,i;return r=function(){},dt.fn(t[0])&&ut(t[0].prototype||{}).length&&(n=t.shift()),e=function(...t){return dt.inst(this,e)?(this._args=t,this.init.apply(this,this._args)):xt(e,t)},e.SuperClass=n,e.SubClasses=[],n&&(r.prototype=n.prototype,e.prototype=new r,dt.arr(n.SubClasses)||(n.SubClasses=[]),n.SubClasses.push(e)),i=function(...t){return Mt.call(this,this,...t)},at(e,Rt,{extend:i,create:Mt}),at(e.prototype,e),e.method(...t),e.prototype._class||(e.prototype._class="New Class"),e.prototype.init?(e.toString=e.prototype.init.toString,e.toValue=e.prototype.init.toValue):e.prototype.init=function(){},e.prototype.constructor=e,e},zt=Mt;function $t(t,e){return t.slice(0,e).join(".")||"."}function Dt(t,e){for(var r=t.length,n=0;n<r;++n)if(t[n]===e)return n+1;return 0}function Ht(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})})),e}at(zt,qt);var Ft=Ht(Object.freeze({__proto__:null,default:function(t,e,r,n){return JSON.stringify(t,function(t,e){var r="function"==typeof t,n="function"==typeof e,i=[],o=[];return function(s,a){if("object"==typeof a)if(i.length){var u=Dt(i,this);0===u?i[i.length]=this:(i.splice(u),o.splice(u)),o[o.length]=s;var c=Dt(i,a);if(0!==c)return n?e.call(this,s,a,$t(o,c)):"[ref="+$t(o,c)+"]"}else i[0]=a,o[0]=s;return r?t.call(this,s,a):a}}(e,n),r)}}));var Bt=t=>{let e=[];return Ft(t,((t,r)=>"function"==typeof r?(e.push(r.toString()),"_"):r),4).replace(/"_"/g,(()=>e.shift()))};const{_get:It,_is:Ut,_argNames:Vt,keys:Xt}=zt,{readyState:Wt}=document;let Jt=!1,Yt={},Kt=()=>{};Yt=Object.defineProperty({},"passive",{get:()=>Jt={capture:!1,passive:!0}}),window.addEventListener("PassiveEventTest",Kt,Yt),window.removeEventListener("PassiveEventsTest",Kt,Yt);let Qt=zt({_class:"Event",init(){this._events={},this._emit=[]},_names:It("Object.keys(_events)"),_eventCount:It("_names.length"),_preEvent(t){return this._events[t]||(this._events[t]=[]),this._events[t]},_eventApp:(t,e,r)=>({callback:t,scope:e,event:r}),on(t,e,r){let n,i;if(!Ut.undef(t))return Ut.str(t)&&(t=t.split(/\s/g)),Ut.not("arr",t)&&Ut.not("obj",t)&&(t=[t]),Xt(t).forEach((function(o){i=t[o],Ut.obj(t)&&Ut.not("arr",t)?(n=this._eventApp(i,e||this,o),this._preEvent(o).push(n)):(n=this._eventApp(e,r,i),this._preEvent(i).push(n))}),this),this},emit(t,e,r){let n,i=e;if(!Ut.undef(t))return Ut.str(t)&&(t=t.split(/\s/g)),Ut.not("arr",t)&&(t=[t]),t.forEach((function(t){n=this._preEvent(t),this._emit.includes(t)||this._emit.push(t),n.forEach((t=>{i=e,"$evt"===Vt(t.callback)[0]&&(i=[t,...e]),t.callback.apply(Ut.undef(t.scope)?r:t.scope,i)}),this)}),this),this},off(t,e,r){let n;if(Ut.undef(t))return;Ut.str(t)&&(t=t.split(/\s/g)),Ut.not("arr",t)&&Ut.not("obj",t)&&(t=[t]);let i=function(t,e,r){let n=this._preEvent(t);if(e){let i,o=this._eventApp(e,r,t);n.forEach(((t,e)=>{Bt(t)===Bt(o)&&(i=e)}),this),i>-1&&n.splice(i,1)}else delete this._events[t]}.bind(this);return Xt(t).forEach((function(o){n=t[o],Ut.obj(t)&&Ut.not("obj",t)?i(o,n,r):i(n,e,r)}),this),this},once(t,e,r){if(Ut.undef(t))return;Ut.str(t)&&(t=t.split(/\s/g)),Ut.not("arr",t)&&Ut.not("obj",t)&&(t=[t]);let n=function(...i){this.off(t,n,r),e.apply(r,i)};return this.on(t,n,r),this},listeners(t){let e=this._preEvent(t);return e.length?e.map((t=>t.callback)):[]},listenerValues(t,...e){let r=this._preEvent(t);return r.length?r.map((t=>t.callback.call(t.scope,...e))):[]},clear(){return this._eventCount=0,this._events={},this},clearListeners(t){return this._events[t]=[],this},add:It("on"),bind:It("on"),remove:It("off"),unbind:It("off"),fire:It("emit"),trigger:It("emit"),callbacks:It("listeners")}).static({nativeEvents:"ready load blur focus focusin focusout resize click scroll dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".replace(/\s+/g," ").split(" "),applyNative(t,e,r,n,i="addEventListener",o){if(!r.length)return;let s,a=r=>i=>{Ut.str(o)&&Pt(i.target,o)?t.emit(r,[i,i.target,t,n],i.target):Ut.str(o)||t.emit(r,[i,e,t,n],e)};/ready|load/.test(r)?/in/.test(Wt)?document.addEventListener?document.addEventListener("DOMContentLoaded",a("ready load")):document.attachEvent("onreadystatechange",(t=>{/in/.test(Wt)||a("ready load")(t)})):a("ready load")():r.split(" ").forEach((t=>{s=/blur|focus/.test(t),e[i](t,a(r),"scroll"===r?Jt:{useCapture:s})}))}});const{documentElement:Gt}=document;let Zt,te=/^\s*<(\w+|!)[^>]*>/,{applyNative:ee,nativeEvents:re}=Qt,ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ie=["column-count","columns","font-weight","line-height","opacity","z-index","zoom"],oe=(t=document,e)=>{let r;if(!dt.str(e)&&0===e.length)return[];if(/^(#?[\w-]+|\.[\w-.]+)$/.test(e))switch(e.charAt(0)){case"#":return[t.getElementById(e.substr(1))];case".":return r=e.substr(1).replace(/\./g," "),[...t.getElementsByClassName(r)];default:return[...t.getElementsByTagName(e)]}return[...t.querySelectorAll(e)]},se=(t,e)=>{if(t.contains)return t!==e&&t.contains(e);for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},ae=t=>dt.inst(t,Zt)?t.toArray():t,ue=function(...t){return[].map.call(t,(t=>ae(t))),[].concat.apply(ae(this),t)},ce=t=>t.length>0?ue.apply([],t):t,le=(t,e,r)=>ce([].map.call(t,e,r).filter((t=>dt.def(t)))),he=t=>"children"in t?[].slice.call(t.children):le(t.childNodes,(t=>{if(1===t.nodeType)return t})),fe={},pe=function(t,e){let r=t.className||"",n=r&&!dt.undef(r.baseVal);if(dt.undef(e))return n?r.baseVal:r;n?r.baseVal=e:t.className=e},de=t=>t in fe?fe[t]:fe[t]=new RegExp("(^|\\s)"+t+"(\\s|$)"),me=t=>{let e,r;return r=document.createElement("div"),r.innerHTML=""+t.replace(ne,"<$1></$2>"),e=[].slice.call(r.childNodes),e.forEach((t=>{r.removeChild(t)})),e},ge=(t,e)=>dt.def(e)?Zt(t).filter(e):Zt(t),ve=(t,e,r)=>null===r?t.removeAttribute(e):t.setAttribute(e,r),ye=t=>{let e=/^true|false|null|undefined|\d+$/,r=/^[[{]([\s\S]+)?[\]}]$/;try{return e.test(t)?(t=>Function(`"use strict"; return ${t};`)())(t):r.test(t)?JSON.parse(t.replace(/'/g,'"')):t}catch(i){return t}},be=(t,e)=>dt.num(+e)&&!ie.includes(t)?e+"px":e,we=Object.getOwnPropertyNames(Array.prototype).reduce((function(t,e){let r=Array.prototype[e];return dt.fn(r)&&!/map|slice|filter|find/.test(e)&&(t[e]=function(...t){let e=r.apply(this,t);return dt.undef(e)?this:e}),t}),{});Zt=Qt.extend(we,{init($super,t="",e){$super(),this.sel=t,this.ele=((t,e)=>dt.str(t)?(t=t.trim(),te.test(t)?me(t):oe(e,t)):dt.inst(t,Zt)?t.ele:dt.arr(t)||dt.inst(t,NodeList)?[...t].filter((t=>dt.def(t))):dt.obj(t)||dt.el(t)?[t]:(dt.fn(t)&&Zt(document).ready(t),[]))(this.sel,e);for(let t=0;t<this.ele.length;t++)this[t]=this.ele[t]},slice(...t){return Zt([].slice.apply(this,t))},map(t){return Zt(le(this,((e,r)=>t.call(e,e,r)),this))},on($super,t,e,r){let n,i,o;if(!dt.undef(t))return dt.str(t)&&(t=t.split(/\s/g)),dt.not("arr",t)&&dt.not("obj",t)&&(t=[t]),i=dt.obj(t)&&dt.not("arr",t)?ut(t):t,n=i.filter((t=>!(t in this._events)),this).join(" "),dt.str(e)?o=e:r=e,this.forEach((function(e,i){$super(t,r),ee(this,e,n,i,"addEventListener",o)}),this),this},off($super,t,e){let r;if(!dt.undef(t))return dt.str(t)&&(t=t.split(/\s/g)),dt.not("arr",t)&&dt.not("obj",t)&&(t=[t]),r=(dt.obj(t)&&dt.not("arr",t)?ut(t):t).join(" "),this.forEach((function(n,i){$super(t,e),ee(this,n,r,i,"removeEventListener")}),this),this},length:Ct("len"),len:Ct("ele.length"),each(t){return[].every.call(this,(function(e,r){return!1!==t.call(e,e,r)})),this},get(t){return dt.undef(t)?[].slice.call(this):this[t>=0?t:t+this.length]},nth:Ct("get"),size(){return this.length},toArray(){return this.get()},remove(){return this.each((t=>{dt.def(t.parentNode),t.parentNode.removeChild(t)}))},not(t){let e,r=this;return Zt(this.reduce((function(n,i,o){return dt.fn(t)&&dt.def(t.call)?t.call(i,i,o)||n.push(i):(e=dt.str(t)?r.filter(t):dt.arrlike(t)&&dt.fn(t.item)?[].slice.call(t):Zt(t),e.indexOf(i)<0&&n.push(i)),n}),[],this))},filter(t){return dt.fn(t)?this.not(this.not(t)):[].filter.call(this,(e=>Pt(e,t)),this)},has(t){return this.filter((e=>dt.obj(t)?se(e,t):Zt(e).find(t).size()))},eq(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first(){let t=this.get(0);return t&&!dt.obj(t)?t:Zt(t)},last(){let t=this.get(-1);return t&&!dt.obj(t)?t:Zt(t)},find(t){let e,r=this;return e=t?dt.obj(t)?Zt(t).filter((t=>[].some.call(r,(e=>se(e,t))))):1===this.length?Zt(oe(this.get(0),t)):this.map((e=>oe(e,t))):Zt(),e},closest(t,e){let r=dt.obj(t)&&Zt(t);return Zt(this.reduce(((n,i)=>{do{if(r?r.indexOf(i)>=0:Pt(i,t))break;i=i!==e&&dt.not("doc",i)&&i.parentNode}while(null!==i&&1===i.nodeType);return i&&n.indexOf(i)<0&&n.push(i),n}),[]))},parents(t){let e=[],r=this;for(;r.length>0;)r=r.map((t=>{if((t=t.parentNode)&&!dt.doc(t)&&e.indexOf(t)<0)return e.push(t),t}));return ge(e,t)},pluck(t){return this.map((e=>e[t]))},parent(t){return ge((e=this.pluck("parentNode"),[].filter.call(e,((t,r)=>e.indexOf(t)===r))),t);var e},children(t){return ge(this.map((t=>he(t))),t)},contents(){return this.map((t=>t.contentDocument||[].slice.call(t.childNodes)))},siblings(t){return ge(this.map((t=>[].filter.call(he(t.parentNode),(e=>e!==t)))),t)},replaceWith(t){return this.before(t).remove()},clone(){return this.map((t=>t.cloneNode(!0)))},toggle(t){return this.each((e=>{Zt(e)[t||"none"===e.style("display")?"show":"hide"]()}))},prev(t){return Zt(this.pluck("previousElementSibling")).filter(t||"*")},next(t){return Zt(this.pluck("nextElementSibling")).filter(t||"*")},html(...t){let[e]=t;return t.length?this.each(((t,r)=>{let n=t.innerHTML;Zt(t).empty().append(vt(e,[r,n],t))})):this.length?this.get(0).innerHTML:null},text(...t){let[e]=t;return t.length?this.each(((t,r)=>{let n=vt(e,[r,t.textContent],t);t.textContent=dt.nul(n)?"":""+n})):this.length?this.pluck("textContent").join(""):null},attr(t,e){let r;return dt.str(t)&&dt.undef(e)?(r=this.length&&1===this.get(0).nodeType&&this.get(0).getAttribute(t),dt.nul(r)?undefined:r):this.each(((r,n)=>{if(1===r.nodeType)if(dt.arr(t))for(let e in t)ve(r,e,t[e]);else ve(r,t,vt(e,[n,r.getAttribute(t)],r))}))},removeAttr(t){return this.each((e=>{1===e.nodeType&&t.split(" ").forEach((t=>{ve(e,t)}))}))},data(t,e){let r=("data-"+t).toLowerCase(),n=dt.def(e)?this.attr(r,e):this.attr(r);return null!==n?ye(n):undefined},val(...t){let e,[r]=t;return t.length?(dt.nul(r)&&(r=""),this.each(((t,e)=>{t.value=vt(r,[e,t.value],t)}))):(e=this.get(0),e&&(e.multiple?Zt(e).find("option").filter((t=>t.selected)).pluck("value"):e.value))},offset(t){let e;return t?this.each(((e,r)=>{let n=Zt(e),i=vt(t,[r,n.offset()],e),o=n.offsetParent().offset(),s={top:i.top-o.top,left:i.left-o.left};"static"===n.style("position")&&(s.position="relative"),n.style(s)})):this.length?Gt===this.get(0)||se(Gt,this.get(0))?(e=this.get(0).getBoundingClientRect(),{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}):{top:0,left:0}:null},style(...t){let e,[r,n]=t,i="";if(t.length<2){let t=this.get(0);if(!t)return;if(dt.str(r))return t.style[r]||window.getComputedStyle(t,"").getPropertyValue(r);if(dt.arr(r)){let e={},n=window.getComputedStyle(t,"");return r.forEach((r=>{e[r]=t.style[r]||n.getPropertyValue(r)})),e}}if(dt.str(r))n||0===n?i=r+":"+be(r,n):this.each((t=>{t.style.removeProperty(r)}));else for(e in r)r[e]||0===r[e]?i+=e+":"+be(e,r[e])+";":this.each((t=>{t.style.removeProperty(e)}));return this.each((t=>{t.style.cssText+=";"+i}))},show(){return this.style("display","")},hide(){return this.style("display","none")},empty(){return this.each((t=>{t.innerHTML=""}))},index(t){return t?this.indexOf(Zt(t).get(0)):this.parent().children().indexOf(this.get(0))},hasClass(t){return!!t&&[].some.call(this,(function(t){return this.test(pe(t))}),de(t))},addClass(t){return t?this.each((function(e,r){if(!("className"in e))return;let n=[],i=pe(e);vt(t,[r,i],e).split(/\s+/g).forEach((function(t){Zt(this).hasClass(t)||n.push(t)}),e),n.length&&pe(e,i+(i?" ":"")+n.join(" "))})):this},removeClass(t){return this.each((function(e,r){if(!("className"in e))return;if(dt.undef(t))return pe(e,"");let n=pe(e);vt(t,[r,n],e).split(/\s+/g).forEach((function(t){n=n.replace(de(t)," ")})),pe(e,n.trim())}))},toggleClass(t,e){return t?this.each((function(r,n){let i=Zt(r);vt(t,[n,pe(r)],r).split(/\s+/g).forEach((function(t){(dt.undef(e)?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)}))})):this},scrollTop(t){if(!this.length)return;let e="scrollTop"in this.get(0);return dt.undef(t)?this.get(0)[e?"scrollTop":"pageYOffset"]:this.each((function(){e?this.scrollTop=t:this.scrollTo(this.scrollX,t)}))},scrollLeft(t){if(!this.length)return;let e="scrollLeft"in this.get(0);return dt.undef(t)?this.get(0)[e?"scrollLeft":"pageXOffset"]:this.each((function(){e?this.scrollLeft=t:this.scrollTo(t,this.scrollY)}))},offsetParent(){return this.map((function(t){let e=t.offsetParent||document.body;for(;e&&!/^(?:body|html)$/i.test(e.nodeName)&&"static"===Zt(e).style("position");)e=e.offsetParent;return e}))},position(){if(!this.length)return;let t=this.get(0),e=this.offsetParent(),r=this.offset(),n=/^(?:body|html)$/i.test(e[0].nodeName)?{top:0,left:0}:e.offset();return r.top-=parseFloat(Zt(t).style("margin-top"))||0,r.left-=parseFloat(Zt(t).style("margin-left"))||0,n.top+=parseFloat(Zt(e[0]).style("border-top-width"))||0,n.left+=parseFloat(Zt(e[0]).style("border-left-width"))||0,{top:r.top-n.top,left:r.left-n.left}}},re.reduce(((t,e)=>(t[e]=function(...t){return this.on(e,...t)},t)),{hover(t,e){return this.mouseenter(t).mouseleave(e||t)}}),["width","height"].reduce(((t,e)=>{let r=pt(e);return t[e]=function(t){let n,i=this.get(0);return dt.undef(t)?dt.win(i)?i["inner"+r]:dt.doc(i)?i.documentElement["scroll"+r]:(n=this.offset())&&n[e]:this.each(((r,n)=>{i=Zt(r),i.style(e,vt(t,[n,i[e]()],r))}))},t}),{}),["after","prepend","before","append"].reduce((function(t,e,r){let n=r%2;return t[e]=function(...t){let e=this.length>1,i=le(t,(function(t){return dt.arr(t)?t.reduce(((t,e)=>(dt.def(e.nodeType)?t.push(e):dt.inst(e,Zt)?t=t.concat(e.get()):dt.str(e)&&(t=t.concat(me(e))),t)),[]):dt.obj(t)||dt.nul(t)?t:me(t)}));return this.each((function(t){let o=n?t:t.parentNode,s=se(Gt,o),a=t.nextSibling,u=t.firstChild;t=[a,u,t,null][r],i.forEach((function(r){if(e)r=r.cloneNode(!0);else if(!o)return Zt(r).remove();o.insertBefore(r,t),s&&((t,e,r="childNodes")=>{let n;n=t=>{t[r]&&t[r].forEach(n,t),e.call(t,t)},n(t)})(r,(function(t){if(!(dt.nul(t.nodeName)||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){let e=t.ownerDocument?t.ownerDocument.defaultView:window;e.eval.call(e,t.innerHTML)}}))}))}))},t[n?e+"To":"insert"+pt(e)]=function(t){return Zt(t)[e](this),this},t}),{}));var Ee=Zt;class ke{constructor(t){this.map=new Map(t)}getMap(){return this.map}get(t){return this.map.get(t)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(t,e){return this.map.set(t,e),this}add(t){let e=this.size;return this.set(e,t),this}get size(){return this.map.size}last(t=1){let e=this.keys()[this.size-t];return this.get(e)}prev(){return this.last(2)}delete(t){return this.map.delete(t),this}clear(){return this.map.clear(),this}has(t){return this.map.has(t)}entries(){return this.map.entries()}forEach(t=((...t)=>{}),e){return this.map.forEach(t,e),this}[Symbol.iterator](){return this.entries()}methodCall(t,...e){return this.forEach((r=>{r[t](...e)})),this}async asyncMethodCall(t,...e){for(let[,r]of this.map)await r[t](...e);return this}}class Pe{constructor({callback:t=(()=>{}),scope:e=null,name:r="event"}){this.listener={callback:t,scope:e,name:r}}getCallback(){return this.listener.callback}getScope(){return this.listener.scope}getEventName(){return this.listener.name}toJSON(){return this.listener}}class xe extends ke{constructor(t="event"){super(),this.name=t}}class Se extends ke{constructor(){super()}getEvent(t){let e=this.get(t);return e instanceof xe?e:(this.set(t,new xe(t)),this.get(t))}newListener(t,e,r){let n=this.getEvent(t);return n.add(new Pe({name:t,callback:e,scope:r})),n}on(t,e,r){if(void 0===t)return this;"string"==typeof t&&(t=t.trim().split(/\s/g));let n,i,o="object"==typeof t&&!Array.isArray(t),s=o?e:r;return o||(i=e),Object.keys(t).forEach((e=>{o?(n=e,i=t[e]):n=t[e],this.newListener(n,i,s)}),this),this}removeListener(t,e,r){let n=this.get(t);if(n instanceof xe&&e){let i=new Pe({name:t,callback:e,scope:r});n.forEach(((t,e)=>{if(t.getCallback()===i.getCallback()&&t.getScope()===i.getScope())return n.delete(e)}))}return n}off(t,e,r){if(void 0===t)return this;"string"==typeof t&&(t=t.trim().split(/\s/g));let n,i,o="object"==typeof t&&!Array.isArray(t),s=o?e:r;return o||(i=e),Object.keys(t).forEach((e=>{o?(n=e,i=t[e]):n=t[e],"function"==typeof i?this.removeListener(n,i,s):this.delete(n)}),this),this}once(t,e,r){if(void 0===t)return this;"string"==typeof t&&(t=t.trim().split(/\s/g));let n,i,o="object"==typeof t&&!Array.isArray(t),s=o?e:r;return o||(i=e),Object.keys(t).forEach((e=>{o?(n=e,i=t[e]):n=t[e];let r=(...a)=>{o?(n=e,i=t[e]):n=t[e],this.off(n,r,s),i.apply(s,a)};this.on(n,r,s)}),this),this}emit(t,...e){return void 0===t||("string"==typeof t&&(t=t.trim().split(/\s/g)),t.forEach((t=>{let r=this.get(t);r instanceof xe&&r.forEach((t=>{let{callback:r,scope:n}=t.toJSON();r.apply(n,e)}))}),this)),this}}const Ae=t=>Array.isArray(t)?t:"string"==typeof t||t instanceof Node?(t=>"string"==typeof t?Array.from(document.querySelectorAll(t)):[t])(t):t instanceof NodeList||t instanceof HTMLCollection?Array.from(t):[],je=(t,e)=>"function"==typeof t?t(...e):t,_e=(t,e)=>{let r,n,i={},o=Object.keys(t);for(let s=0,a=o.length;s<a;s++)r=o[s],n=t[r],i[r]=je(n,e);return i},Oe={ease:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},Ce=t=>/^(ease|in|out)/.test(t)?Oe[t]:t,Te={keyframes:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",autoplay:!0,duration:1e3,onfinish(){},fillMode:"auto",direction:"normal"};class Le{constructor(t={}){this.options={},this.targets=[],this.properties={},this.animations=new Map,this.duration=0,this.emitter=new Se;let{options:e,...r}=t;this.options=Object.assign({},Te,e,r),this.loop=this.loop.bind(this);let n,{loop:i,delay:o,speed:s,easing:a,endDelay:u,duration:c,direction:l,fillMode:h,onfinish:f,target:p,keyframes:d,autoplay:m,...g}=this.options;this.mainElement=document.createElement("span"),this.targets=Ae(p),this.properties=g;for(let t=0,e=this.targets.length;t<e;t++){let r=this.targets[t],s={easing:Ce(a),iterations:!0===i?Infinity:i,direction:l,endDelay:u,duration:c,delay:o,fill:h},p=je(d,[t,e,r]);n=p.length?p:this.properties,s=_e(s,[t,e,r]),p.length>0||(n=_e(n,[t,e,r]));let m=s.delay+s.duration*s.iterations+s.endDelay;this.duration<m&&(this.duration=m);let g=r.animate(n,s);g.onfinish=()=>{f(r,t,e)},this.animations.set(r,g)}this.mainAnimation=this.mainElement.animate([{opacity:"0"},{opacity:"1"}],{duration:this.duration,easing:"linear"}),this.setSpeed(s),m?this.play():this.pause(),this.promise=this.newPromise(),this.mainAnimation.onfinish=()=>{this.finish(this.options),window.cancelAnimationFrame(this.animationFrame)}}getTargets(){return this.targets}newPromise(){return new Promise(((t,e)=>{try{this.finish=e=>(this.emit("finish",e),t(e))}catch(c){e(c)}}))}then(t,e){return this.promise.then(t,e)}catch(t){return this.promise.catch(t)}finally(t){return this.promise.finally(t)}loop(){this.animationFrame=window.requestAnimationFrame(this.loop),this.emit("tick change",this.getCurrentTime())}on(t,e,r){return this.emitter.on(t,e,r),this}off(t,e,r){return this.emitter.off(t,e,r),this}emit(t,...e){return this.emitter.emit(t,...e),this}getAnimation(t){return this.animations.get(t)}play(){return"finished"!==this.mainAnimation.playState&&(this.mainAnimation.play(),this.animationFrame=requestAnimationFrame(this.loop),this.animations.forEach((t=>{"finished"!==t.playState&&t.play()})),this.emit("play")),this}pause(){return"finished"!==this.mainAnimation.playState&&(this.mainAnimation.pause(),window.cancelAnimationFrame(this.animationFrame),this.animations.forEach((t=>{"finished"!==t.playState&&t.pause()})),this.emit("pause")),this}getDuration(){return this.duration}getCurrentTime(){return this.mainAnimation.currentTime}setCurrentTime(t){return this.mainAnimation.currentTime=t,this.animations.forEach((e=>{e.currentTime=t})),this}getProgress(){return this.getCurrentTime()/this.duration}setProgress(t){return this.mainAnimation.currentTime=t*this.duration,this.animations.forEach((e=>{e.currentTime=t*this.duration})),this}getSpeed(){return this.mainAnimation.playbackRate}setSpeed(t=1){return this.mainAnimation.playbackRate=t,this.animations.forEach((e=>{e.playbackRate=t})),this}reset(){this.setCurrentTime(0),this.promise=this.newPromise(),this.options.autoplay?this.play():this.pause()}getPlayState(){return this.mainAnimation.playState}getOptions(){return this.options}toJSON(){return this.getOptions()}}const Ne=(t={})=>new Le(t);let qe,Re,Me,ze=Ee("#back-to-top"),$e=Ee(".navbar"),De=Ee(window),He=$e.height(),Fe=He+20;Me=window.document.scrollingElement||window.document.body||window.document.documentElement,Me=Ee(Me),$e.click(".navbar-menu",(t=>{t.preventDefault(),$e.toggleClass("navbar-show")})),ze.click((t=>{t.preventDefault(),Me.animate({scrollTop:0,duration:500,easing:"easeInOutQuad"})})),De.scroll(Re=()=>{$e.toggleClass("navbar-focus",De.scrollTop()+He>=Fe),$e.hasClass("navbar-show")&&$e.removeClass("navbar-show")}),qe=()=>{let t,e=Ee(".next-layer"),r=Ee(".load-img"),n=Ee(".main");Re(),r.each((t=>{let e=Ee(t),r=e.find(".core-img").get(0),n=e.find(".placeholder-img");r.complete?n.addClass("core-img-show"):r.addEventListener("load",(function(){n.addClass("core-img-show")}),!1)})),e.click(((e,r)=>{e.preventDefault(),t=Ee(r).closest(".layer",n).next(".layer"),Me.animate({scrollTop:Ee(t).offset().top-He,duration:500,easing:"easeInOutQuad"})}))},qe(),st.init({transitions:[{enter({current:t,next:e}){const r=this.async();try{let n=t.container.querySelector(".main");e.container.querySelector(".main").style.opacity="0",n.style.opacity="1",(async()=>{await Ne({target:n,opacity:[1,0],easing:"ease",duration:300}),n.style.opacity="0",r()})()}catch(i){console.log(i.message),r()}},after({next:t}){const e=this.async();try{let r=t.container.querySelector(".main");(async()=>{await Ne({target:r,opacity:[0,1],easing:"ease",duration:300}),r.style.opacity="1",qe(),e()})()}catch(i){console.log(i.message),e()}}}]});
//# sourceMappingURL=/maps/app.modern.min.js.map
