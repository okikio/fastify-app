{"version":3,"sources":["node_modules/delegate/src/closest.js","node_modules/delegate/src/delegate.js","node_modules/swup/lib/modules/Cache.js","node_modules/swup/lib/helpers/classify.js","node_modules/swup/lib/helpers/createHistoryRecord.js","node_modules/swup/lib/utils/index.js","node_modules/swup/lib/helpers/getDataFromHtml.js","node_modules/swup/lib/helpers/fetch.js","node_modules/swup/lib/helpers/transitionEnd.js","node_modules/swup/lib/helpers/getCurrentUrl.js","node_modules/swup/lib/helpers/markSwupElements.js","node_modules/swup/lib/helpers/Link.js","node_modules/swup/lib/helpers/index.js","node_modules/swup/lib/modules/loadPage.js","node_modules/swup/lib/modules/renderPage.js","node_modules/swup/lib/modules/triggerEvent.js","node_modules/swup/lib/modules/on.js","node_modules/swup/lib/modules/off.js","node_modules/swup/lib/modules/updateTransition.js","node_modules/swup/lib/modules/getAnimationPromises.js","node_modules/swup/lib/modules/getPageData.js","node_modules/swup/lib/modules/plugins.js","node_modules/swup/lib/index.js","src/js/components/util.js","src/js/components/ele.js","src/js/app.js"],"names":["unwrapExports","x","__esModule","Object","prototype","hasOwnProperty","call","createCommonjsModule","fn","module","exports","DOCUMENT_NODE_TYPE","Element","matches","proto","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","closest","element","selector","nodeType","parentNode","closest_1","delegate","type","callback","useCapture","listenerFn","listener","apply","this","arguments","addEventListener","destroy","removeEventListener","e","delegateTarget","target","delegate_1","Cache_1","defineProperty","value","_createClass","defineProperties","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","Cache","instance","TypeError","_classCallCheck","pages","last","page","url","swup","log","keys","getPage","window","location","pathname","search","default","Cache_2","classify_1","text","output","toString","toLowerCase","replace","splice","createHistoryRecord_1","history","pushState","href","split","hostname","random","Math","source","document","getElementsByTagName","innerText","utils","query","context","undefined","querySelector","queryAll","Array","slice","querySelectorAll","utils_1","utils_2","getDataFromHtml_1","_typeof","Symbol","iterator","obj","constructor","html","containers","content","fakeDom","createElement","innerHTML","blocks","_loop","v","forEach","item","index","setAttribute","push","outerHTML","_ret","json","title","pageClass","className","originalContent","fetch_1","_extends","assign","setOptions","defaults","method","data","headers","options","request","XMLHttpRequest","onreadystatechange","readyState","status","open","setRequestHeader","send","transitionEnd_1","el","transEndEventNames","WebkitTransition","MozTransition","OTransition","transition","name","style","getCurrentUrl_1","markSwupElements_1","console","warn","Link_1","Link","elementOrUrl","SVGElement","link","path","getAttribute","hash","helpers","markSwupElements","getCurrentUrl","transitionEnd","fetch","getDataFromHtml","createHistoryRecord","classify","_classify2","_interopRequireDefault","_createHistoryRecord2","_getDataFromHtml2","_fetch2","_transitionEnd2","_getCurrentUrl2","_markSwupElements2","_Link2","helpers_1","helpers_2","helpers_3","helpers_4","helpers_5","helpers_6","helpers_7","helpers_8","loadPage_1","popstate","_this","animationPromises","xhrPromise","triggerEvent","customTransition","updateTransition","documentElement","classList","add","animateHistoryBrowsing","getAnimationPromises","Promise","all","then","state","scrollToElement","animateOut","cache","exists","resolve","preloadPromise","route","reject","requestHeaders","response","getPageData","cacheUrl","concat","renderPage","catch","errorUrl","skipPopStateHandling","go","renderPage_1","remove","responseURL","getPath","replaceState","body","empty","setTimeout","classItem","RegExp","test","triggerEvent_1","eventName","originalEvent","_handlers","handler","error","event","CustomEvent","detail","dispatchEvent","on_1","off_1","filter","savedHandler","toRemove","indexOf","updateTransition_1","from","to","custom","getAnimationPromises_1","promises","animationSelector","promise","getPageData_1","responseText","pageObject","plugins","use","plugin","isSwupPlugin","_beforeMount","mount","unuse","pluginReference","find","p","unmount","_afterUnmount","findPlugin","pluginName","plugins_1","plugins_2","plugins_3","lib","_delegate2","_Cache2","_loadPage2","_renderPage2","_triggerEvent2","_on2","_off2","_updateTransition2","_getAnimationPromises2","_getPageData2","Swup","linkSelector","origin","X-Requested-With","Accept","animationInDone","animationInStart","animationOutDone","animationOutStart","animationSkipped","clickLink","contentReplaced","disabled","enabled","openPageInNewTab","pageLoaded","pageRetrievedFromCache","pageView","popState","samePage","samePageWithHash","serverError","transitionStart","willReplaceContent","delegatedListeners","loadPage","on","off","enable","click","linkClickHandler","bind","popStateHandler","_this2","mouseover","removeAttribute","metaKey","ctrlKey","shiftKey","altKey","button","preventDefault","getAddress","getHash","values","isArray","of","_is","val","_isInst","ctor","_type","Document","[object Object]","len","class","_method","_class","not","args","doc","def","undef","bool","num","str","nul","inst","arr","El","prop","each","ele","set","message","x-partial"],"mappings":"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","sourcesContent":["var DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n","var closest = require('./closest');\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Cache = exports.Cache = function () {\n\tfunction Cache() {\n\t\t_classCallCheck(this, Cache);\n\n\t\tthis.pages = {};\n\t\tthis.last = null;\n\t}\n\n\t_createClass(Cache, [{\n\t\tkey: 'cacheUrl',\n\t\tvalue: function cacheUrl(page) {\n\t\t\tif (page.url in this.pages === false) {\n\t\t\t\tthis.pages[page.url] = page;\n\t\t\t}\n\t\t\tthis.last = this.pages[page.url];\n\t\t\tthis.swup.log('Cache (' + Object.keys(this.pages).length + ')', this.pages);\n\t\t}\n\t}, {\n\t\tkey: 'getPage',\n\t\tvalue: function getPage(url) {\n\t\t\treturn this.pages[url];\n\t\t}\n\t}, {\n\t\tkey: 'getCurrentPage',\n\t\tvalue: function getCurrentPage() {\n\t\t\treturn this.getPage(window.location.pathname + window.location.search);\n\t\t}\n\t}, {\n\t\tkey: 'exists',\n\t\tvalue: function exists(url) {\n\t\t\treturn url in this.pages;\n\t\t}\n\t}, {\n\t\tkey: 'empty',\n\t\tvalue: function empty() {\n\t\t\tthis.pages = {};\n\t\t\tthis.last = null;\n\t\t\tthis.swup.log('Cache cleared');\n\t\t}\n\t}, {\n\t\tkey: 'remove',\n\t\tvalue: function remove(url) {\n\t\t\tdelete this.pages[url];\n\t\t}\n\t}]);\n\n\treturn Cache;\n}();\n\nexports.default = Cache;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar classify = function classify(text) {\n\tvar output = text.toString().toLowerCase().replace(/\\s+/g, '-') // Replace spaces with -\n\t.replace(/\\//g, '-') // Replace / with -\n\t.replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n\t.replace(/\\-\\-+/g, '-') // Replace multiple - with single -\n\t.replace(/^-+/, '') // Trim - from start of text\n\t.replace(/-+$/, ''); // Trim - from end of text\n\tif (output[0] === '/') output = output.splice(1);\n\tif (output === '') output = 'homepage';\n\treturn output;\n};\n\nexports.default = classify;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar createHistoryRecord = function createHistoryRecord(url) {\n\twindow.history.pushState({\n\t\turl: url || window.location.href.split(window.location.hostname)[1],\n\t\trandom: Math.random(),\n\t\tsource: 'swup'\n\t}, document.getElementsByTagName('title')[0].innerText, url || window.location.href.split(window.location.hostname)[1]);\n};\n\nexports.default = createHistoryRecord;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar query = exports.query = function query(selector) {\n\tvar context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n\tif (typeof selector !== 'string') {\n\t\treturn selector;\n\t}\n\n\treturn context.querySelector(selector);\n};\n\nvar queryAll = exports.queryAll = function queryAll(selector) {\n\tvar context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n\tif (typeof selector !== 'string') {\n\t\treturn selector;\n\t}\n\n\treturn Array.prototype.slice.call(context.querySelectorAll(selector));\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _utils = require('../utils');\n\nvar getDataFromHtml = function getDataFromHtml(html, containers) {\n\tvar content = html.replace('<body', '<div id=\"swupBody\"').replace('</body>', '</div>');\n\tvar fakeDom = document.createElement('div');\n\tfakeDom.innerHTML = content;\n\tvar blocks = [];\n\n\tvar _loop = function _loop(i) {\n\t\tif (fakeDom.querySelector(containers[i]) == null) {\n\t\t\t// page in invalid\n\t\t\treturn {\n\t\t\t\tv: null\n\t\t\t};\n\t\t} else {\n\t\t\t(0, _utils.queryAll)(containers[i]).forEach(function (item, index) {\n\t\t\t\t(0, _utils.queryAll)(containers[i], fakeDom)[index].setAttribute('data-swup', blocks.length); // marks element with data-swup\n\t\t\t\tblocks.push((0, _utils.queryAll)(containers[i], fakeDom)[index].outerHTML);\n\t\t\t});\n\t\t}\n\t};\n\n\tfor (var i = 0; i < containers.length; i++) {\n\t\tvar _ret = _loop(i);\n\n\t\tif ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t}\n\n\tvar json = {\n\t\ttitle: fakeDom.querySelector('title').innerText,\n\t\tpageClass: fakeDom.querySelector('#swupBody').className,\n\t\toriginalContent: html,\n\t\tblocks: blocks\n\t};\n\n\t// to prevent memory leaks\n\tfakeDom.innerHTML = '';\n\tfakeDom = null;\n\n\treturn json;\n};\n\nexports.default = getDataFromHtml;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar fetch = function fetch(setOptions) {\n\tvar callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n\tvar defaults = {\n\t\turl: window.location.pathname + window.location.search,\n\t\tmethod: 'GET',\n\t\tdata: null,\n\t\theaders: {}\n\t};\n\n\tvar options = _extends({}, defaults, setOptions);\n\n\tvar request = new XMLHttpRequest();\n\n\trequest.onreadystatechange = function () {\n\t\tif (request.readyState === 4) {\n\t\t\tif (request.status !== 500) {\n\t\t\t\tcallback(request);\n\t\t\t} else {\n\t\t\t\tcallback(request);\n\t\t\t}\n\t\t}\n\t};\n\n\trequest.open(options.method, options.url, true);\n\tObject.keys(options.headers).forEach(function (key) {\n\t\trequest.setRequestHeader(key, options.headers[key]);\n\t});\n\trequest.send(options.data);\n\treturn request;\n};\n\nexports.default = fetch;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar transitionEnd = function transitionEnd() {\n\tvar el = document.createElement('div');\n\n\tvar transEndEventNames = {\n\t\tWebkitTransition: 'webkitTransitionEnd',\n\t\tMozTransition: 'transitionend',\n\t\tOTransition: 'oTransitionEnd otransitionend',\n\t\ttransition: 'transitionend'\n\t};\n\n\tfor (var name in transEndEventNames) {\n\t\tif (el.style[name] !== undefined) {\n\t\t\treturn transEndEventNames[name];\n\t\t}\n\t}\n\n\treturn false;\n};\n\nexports.default = transitionEnd;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar getCurrentUrl = function getCurrentUrl() {\n\treturn window.location.pathname + window.location.search;\n};\n\nexports.default = getCurrentUrl;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _utils = require('../utils');\n\nvar markSwupElements = function markSwupElements(element, containers) {\n\tvar blocks = 0;\n\n\tvar _loop = function _loop(i) {\n\t\tif (element.querySelector(containers[i]) == null) {\n\t\t\tconsole.warn('Element ' + containers[i] + ' is not in current page.');\n\t\t} else {\n\t\t\t(0, _utils.queryAll)(containers[i]).forEach(function (item, index) {\n\t\t\t\t(0, _utils.queryAll)(containers[i], element)[index].setAttribute('data-swup', blocks);\n\t\t\t\tblocks++;\n\t\t\t});\n\t\t}\n\t};\n\n\tfor (var i = 0; i < containers.length; i++) {\n\t\t_loop(i);\n\t}\n};\n\nexports.default = markSwupElements;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Link = function () {\n\tfunction Link(elementOrUrl) {\n\t\t_classCallCheck(this, Link);\n\n\t\tif (elementOrUrl instanceof Element || elementOrUrl instanceof SVGElement) {\n\t\t\tthis.link = elementOrUrl;\n\t\t} else {\n\t\t\tthis.link = document.createElement('a');\n\t\t\tthis.link.href = elementOrUrl;\n\t\t}\n\t}\n\n\t_createClass(Link, [{\n\t\tkey: 'getPath',\n\t\tvalue: function getPath() {\n\t\t\tvar path = this.link.pathname;\n\t\t\tif (path[0] !== '/') {\n\t\t\t\tpath = '/' + path;\n\t\t\t}\n\t\t\treturn path;\n\t\t}\n\t}, {\n\t\tkey: 'getAddress',\n\t\tvalue: function getAddress() {\n\t\t\tvar path = this.link.pathname + this.link.search;\n\n\t\t\tif (this.link.getAttribute('xlink:href')) {\n\t\t\t\tpath = this.link.getAttribute('xlink:href');\n\t\t\t}\n\n\t\t\tif (path[0] !== '/') {\n\t\t\t\tpath = '/' + path;\n\t\t\t}\n\t\t\treturn path;\n\t\t}\n\t}, {\n\t\tkey: 'getHash',\n\t\tvalue: function getHash() {\n\t\t\treturn this.link.hash;\n\t\t}\n\t}]);\n\n\treturn Link;\n}();\n\nexports.default = Link;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Link = exports.markSwupElements = exports.getCurrentUrl = exports.transitionEnd = exports.fetch = exports.getDataFromHtml = exports.createHistoryRecord = exports.classify = undefined;\n\nvar _classify = require('./classify');\n\nvar _classify2 = _interopRequireDefault(_classify);\n\nvar _createHistoryRecord = require('./createHistoryRecord');\n\nvar _createHistoryRecord2 = _interopRequireDefault(_createHistoryRecord);\n\nvar _getDataFromHtml = require('./getDataFromHtml');\n\nvar _getDataFromHtml2 = _interopRequireDefault(_getDataFromHtml);\n\nvar _fetch = require('./fetch');\n\nvar _fetch2 = _interopRequireDefault(_fetch);\n\nvar _transitionEnd = require('./transitionEnd');\n\nvar _transitionEnd2 = _interopRequireDefault(_transitionEnd);\n\nvar _getCurrentUrl = require('./getCurrentUrl');\n\nvar _getCurrentUrl2 = _interopRequireDefault(_getCurrentUrl);\n\nvar _markSwupElements = require('./markSwupElements');\n\nvar _markSwupElements2 = _interopRequireDefault(_markSwupElements);\n\nvar _Link = require('./Link');\n\nvar _Link2 = _interopRequireDefault(_Link);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar classify = exports.classify = _classify2.default;\nvar createHistoryRecord = exports.createHistoryRecord = _createHistoryRecord2.default;\nvar getDataFromHtml = exports.getDataFromHtml = _getDataFromHtml2.default;\nvar fetch = exports.fetch = _fetch2.default;\nvar transitionEnd = exports.transitionEnd = _transitionEnd2.default;\nvar getCurrentUrl = exports.getCurrentUrl = _getCurrentUrl2.default;\nvar markSwupElements = exports.markSwupElements = _markSwupElements2.default;\nvar Link = exports.Link = _Link2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _helpers = require('../helpers');\n\nvar loadPage = function loadPage(data, popstate) {\n\tvar _this = this;\n\n\t// create array for storing animation promises\n\tvar animationPromises = [],\n\t    xhrPromise = void 0;\n\tvar animateOut = function animateOut() {\n\t\t_this.triggerEvent('animationOutStart');\n\n\t\t// handle classes\n\t\tdocument.documentElement.classList.add('is-changing');\n\t\tdocument.documentElement.classList.add('is-leaving');\n\t\tdocument.documentElement.classList.add('is-animating');\n\t\tif (popstate) {\n\t\t\tdocument.documentElement.classList.add('is-popstate');\n\t\t}\n\t\tdocument.documentElement.classList.add('to-' + (0, _helpers.classify)(data.url));\n\n\t\t// animation promise stuff\n\t\tanimationPromises = _this.getAnimationPromises('out');\n\t\tPromise.all(animationPromises).then(function () {\n\t\t\t_this.triggerEvent('animationOutDone');\n\t\t});\n\n\t\t// create history record if this is not a popstate call\n\t\tif (!popstate) {\n\t\t\t// create pop element with or without anchor\n\t\t\tvar state = void 0;\n\t\t\tif (_this.scrollToElement != null) {\n\t\t\t\tstate = data.url + _this.scrollToElement;\n\t\t\t} else {\n\t\t\t\tstate = data.url;\n\t\t\t}\n\n\t\t\t(0, _helpers.createHistoryRecord)(state);\n\t\t}\n\t};\n\n\tthis.triggerEvent('transitionStart', popstate);\n\n\t// set transition object\n\tif (data.customTransition != null) {\n\t\tthis.updateTransition(window.location.pathname, data.url, data.customTransition);\n\t\tdocument.documentElement.classList.add('to-' + (0, _helpers.classify)(data.customTransition));\n\t} else {\n\t\tthis.updateTransition(window.location.pathname, data.url);\n\t}\n\n\t// start/skip animation\n\tif (!popstate || this.options.animateHistoryBrowsing) {\n\t\tanimateOut();\n\t} else {\n\t\tthis.triggerEvent('animationSkipped');\n\t}\n\n\t// start/skip loading of page\n\tif (this.cache.exists(data.url)) {\n\t\txhrPromise = new Promise(function (resolve) {\n\t\t\tresolve();\n\t\t});\n\t\tthis.triggerEvent('pageRetrievedFromCache');\n\t} else {\n\t\tif (!this.preloadPromise || this.preloadPromise.route != data.url) {\n\t\t\txhrPromise = new Promise(function (resolve, reject) {\n\t\t\t\t(0, _helpers.fetch)(_extends({}, data, { headers: _this.options.requestHeaders }), function (response) {\n\t\t\t\t\tif (response.status === 500) {\n\t\t\t\t\t\t_this.triggerEvent('serverError');\n\t\t\t\t\t\treject(data.url);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// get json data\n\t\t\t\t\t\tvar page = _this.getPageData(response);\n\t\t\t\t\t\tif (page != null) {\n\t\t\t\t\t\t\tpage.url = data.url;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject(data.url);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// render page\n\t\t\t\t\t\t_this.cache.cacheUrl(page);\n\t\t\t\t\t\t_this.triggerEvent('pageLoaded');\n\t\t\t\t\t}\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\txhrPromise = this.preloadPromise;\n\t\t}\n\t}\n\n\t// when everything is ready, handle the outcome\n\tPromise.all(animationPromises.concat([xhrPromise])).then(function () {\n\t\t// render page\n\t\t_this.renderPage(_this.cache.getPage(data.url), popstate);\n\t\t_this.preloadPromise = null;\n\t}).catch(function (errorUrl) {\n\t\t// rewrite the skipPopStateHandling function to redirect manually when the history.go is processed\n\t\t_this.options.skipPopStateHandling = function () {\n\t\t\twindow.location = errorUrl;\n\t\t\treturn true;\n\t\t};\n\n\t\t// go back to the actual page were still at\n\t\twindow.history.go(-1);\n\t});\n};\n\nexports.default = loadPage;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _utils = require('../utils');\n\nvar _helpers = require('../helpers');\n\nvar renderPage = function renderPage(page, popstate) {\n\tvar _this = this;\n\n\tdocument.documentElement.classList.remove('is-leaving');\n\n\t// replace state in case the url was redirected\n\tvar link = new _helpers.Link(page.responseURL);\n\tif (window.location.pathname !== link.getPath()) {\n\t\twindow.history.replaceState({\n\t\t\turl: link.getPath(),\n\t\t\trandom: Math.random(),\n\t\t\tsource: 'swup'\n\t\t}, document.title, link.getPath());\n\n\t\t// save new record for redirected url\n\t\tthis.cache.cacheUrl(_extends({}, page, { url: link.getPath() }));\n\t}\n\n\t// only add for non-popstate transitions\n\tif (!popstate || this.options.animateHistoryBrowsing) {\n\t\tdocument.documentElement.classList.add('is-rendering');\n\t}\n\n\tthis.triggerEvent('willReplaceContent', popstate);\n\n\t// replace blocks\n\tfor (var i = 0; i < page.blocks.length; i++) {\n\t\tdocument.body.querySelector('[data-swup=\"' + i + '\"]').outerHTML = page.blocks[i];\n\t}\n\n\t// set title\n\tdocument.title = page.title;\n\n\tthis.triggerEvent('contentReplaced', popstate);\n\tthis.triggerEvent('pageView', popstate);\n\n\t// empty cache if it's disabled (because pages could be preloaded and stuff)\n\tif (!this.options.cache) {\n\t\tthis.cache.empty();\n\t}\n\n\t// start animation IN\n\tsetTimeout(function () {\n\t\tif (!popstate || _this.options.animateHistoryBrowsing) {\n\t\t\t_this.triggerEvent('animationInStart');\n\t\t\tdocument.documentElement.classList.remove('is-animating');\n\t\t}\n\t}, 10);\n\n\t// handle end of animation\n\tvar animationPromises = this.getAnimationPromises('in');\n\tif (!popstate || this.options.animateHistoryBrowsing) {\n\t\tPromise.all(animationPromises).then(function () {\n\t\t\t_this.triggerEvent('animationInDone');\n\t\t\t_this.triggerEvent('transitionEnd', popstate);\n\t\t\t// remove \"to-{page}\" classes\n\t\t\tdocument.documentElement.className.split(' ').forEach(function (classItem) {\n\t\t\t\tif (new RegExp('^to-').test(classItem) || classItem === 'is-changing' || classItem === 'is-rendering' || classItem === 'is-popstate') {\n\t\t\t\t\tdocument.documentElement.classList.remove(classItem);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t} else {\n\t\tthis.triggerEvent('transitionEnd', popstate);\n\t}\n\n\t// reset scroll-to element\n\tthis.scrollToElement = null;\n};\n\nexports.default = renderPage;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar triggerEvent = function triggerEvent(eventName, originalEvent) {\n\t// call saved handlers with \"on\" method and pass originalEvent object if available\n\tthis._handlers[eventName].forEach(function (handler) {\n\t\ttry {\n\t\t\thandler(originalEvent);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t});\n\n\t// trigger event on document with prefix \"swup:\"\n\tvar event = new CustomEvent('swup:' + eventName, { detail: eventName });\n\tdocument.dispatchEvent(event);\n};\n\nexports.default = triggerEvent;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar on = function on(event, handler) {\n\tif (this._handlers[event]) {\n\t\tthis._handlers[event].push(handler);\n\t} else {\n\t\tconsole.warn(\"Unsupported event \" + event + \".\");\n\t}\n};\n\nexports.default = on;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar off = function off(event, handler) {\n\tvar _this = this;\n\n\tif (event != null) {\n\t\tif (handler != null) {\n\t\t\tif (this._handlers[event] && this._handlers[event].filter(function (savedHandler) {\n\t\t\t\treturn savedHandler === handler;\n\t\t\t}).length) {\n\t\t\t\tvar toRemove = this._handlers[event].filter(function (savedHandler) {\n\t\t\t\t\treturn savedHandler === handler;\n\t\t\t\t})[0];\n\t\t\t\tvar index = this._handlers[event].indexOf(toRemove);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tthis._handlers[event].splice(index, 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Handler for event '\" + event + \"' no found.\");\n\t\t\t}\n\t\t} else {\n\t\t\tthis._handlers[event] = [];\n\t\t}\n\t} else {\n\t\tObject.keys(this._handlers).forEach(function (keys) {\n\t\t\t_this._handlers[keys] = [];\n\t\t});\n\t}\n};\n\nexports.default = off;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar updateTransition = function updateTransition(from, to, custom) {\n\t// transition routes\n\tthis.transition = {\n\t\tfrom: from,\n\t\tto: to,\n\t\tcustom: custom\n\t};\n};\n\nexports.default = updateTransition;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _utils = require('../utils');\n\nvar _helpers = require('../helpers');\n\nvar getAnimationPromises = function getAnimationPromises() {\n\tvar promises = [];\n\tvar animatedElements = (0, _utils.queryAll)(this.options.animationSelector);\n\tanimatedElements.forEach(function (element) {\n\t\tvar promise = new Promise(function (resolve) {\n\t\t\telement.addEventListener((0, _helpers.transitionEnd)(), function (event) {\n\t\t\t\tif (element == event.target) {\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tpromises.push(promise);\n\t});\n\treturn promises;\n};\n\nexports.default = getAnimationPromises;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _helpers = require('../helpers');\n\nvar getPageData = function getPageData(request) {\n\t// this method can be replaced in case other content than html is expected to be received from server\n\t// this function should always return {title, pageClass, originalContent, blocks, responseURL}\n\t// in case page has invalid structure - return null\n\tvar html = request.responseText;\n\tvar pageObject = (0, _helpers.getDataFromHtml)(html, this.options.containers);\n\n\tif (pageObject) {\n\t\tpageObject.responseURL = request.responseURL ? request.responseURL : window.location.href;\n\t} else {\n\t\tconsole.warn('Received page is invalid.');\n\t\treturn null;\n\t}\n\n\treturn pageObject;\n};\n\nexports.default = getPageData;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar use = exports.use = function use(plugin) {\n\tif (!plugin.isSwupPlugin) {\n\t\tconsole.warn('Not swup plugin instance ' + plugin + '.');\n\t\treturn;\n\t}\n\n\tthis.plugins.push(plugin);\n\tplugin.swup = this;\n\tif (typeof plugin._beforeMount === 'function') {\n\t\tplugin._beforeMount();\n\t}\n\tplugin.mount();\n\n\treturn this.plugins;\n};\n\nvar unuse = exports.unuse = function unuse(plugin) {\n\tvar pluginReference = void 0;\n\n\tif (typeof plugin === 'string') {\n\t\tpluginReference = this.plugins.find(function (p) {\n\t\t\treturn plugin === p.name;\n\t\t});\n\t} else {\n\t\tpluginReference = plugin;\n\t}\n\n\tif (!pluginReference) {\n\t\tconsole.warn('No such plugin.');\n\t\treturn;\n\t}\n\n\tpluginReference.unmount();\n\n\tif (typeof pluginReference._afterUnmount === 'function') {\n\t\tpluginReference._afterUnmount();\n\t}\n\n\tvar index = this.plugins.indexOf(pluginReference);\n\tthis.plugins.splice(index, 1);\n\n\treturn this.plugins;\n};\n\nvar findPlugin = exports.findPlugin = function findPlugin(pluginName) {\n\treturn this.plugins.find(function (p) {\n\t\treturn pluginName === p.name;\n\t});\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n// modules\n\n\nvar _delegate = require('delegate');\n\nvar _delegate2 = _interopRequireDefault(_delegate);\n\nvar _Cache = require('./modules/Cache');\n\nvar _Cache2 = _interopRequireDefault(_Cache);\n\nvar _loadPage = require('./modules/loadPage');\n\nvar _loadPage2 = _interopRequireDefault(_loadPage);\n\nvar _renderPage = require('./modules/renderPage');\n\nvar _renderPage2 = _interopRequireDefault(_renderPage);\n\nvar _triggerEvent = require('./modules/triggerEvent');\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nvar _on = require('./modules/on');\n\nvar _on2 = _interopRequireDefault(_on);\n\nvar _off = require('./modules/off');\n\nvar _off2 = _interopRequireDefault(_off);\n\nvar _updateTransition = require('./modules/updateTransition');\n\nvar _updateTransition2 = _interopRequireDefault(_updateTransition);\n\nvar _getAnimationPromises = require('./modules/getAnimationPromises');\n\nvar _getAnimationPromises2 = _interopRequireDefault(_getAnimationPromises);\n\nvar _getPageData = require('./modules/getPageData');\n\nvar _getPageData2 = _interopRequireDefault(_getPageData);\n\nvar _plugins = require('./modules/plugins');\n\nvar _utils = require('./utils');\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Swup = function () {\n\tfunction Swup(setOptions) {\n\t\t_classCallCheck(this, Swup);\n\n\t\t// default options\n\t\tvar defaults = {\n\t\t\tanimateHistoryBrowsing: false,\n\t\t\tanimationSelector: '[class*=\"transition-\"]',\n\t\t\tlinkSelector: 'a[href^=\"' + window.location.origin + '\"]:not([data-no-swup]), a[href^=\"/\"]:not([data-no-swup]), a[href^=\"#\"]:not([data-no-swup])',\n\t\t\tcache: true,\n\t\t\tcontainers: ['#swup'],\n\t\t\trequestHeaders: {\n\t\t\t\t'X-Requested-With': 'swup',\n\t\t\t\tAccept: 'text/html, application/xhtml+xml'\n\t\t\t},\n\t\t\tplugins: [],\n\t\t\tskipPopStateHandling: function skipPopStateHandling(event) {\n\t\t\t\treturn !(event.state && event.state.source === 'swup');\n\t\t\t}\n\t\t};\n\n\t\t// merge options\n\t\tvar options = _extends({}, defaults, setOptions);\n\n\t\t// handler arrays\n\t\tthis._handlers = {\n\t\t\tanimationInDone: [],\n\t\t\tanimationInStart: [],\n\t\t\tanimationOutDone: [],\n\t\t\tanimationOutStart: [],\n\t\t\tanimationSkipped: [],\n\t\t\tclickLink: [],\n\t\t\tcontentReplaced: [],\n\t\t\tdisabled: [],\n\t\t\tenabled: [],\n\t\t\topenPageInNewTab: [],\n\t\t\tpageLoaded: [],\n\t\t\tpageRetrievedFromCache: [],\n\t\t\tpageView: [],\n\t\t\tpopState: [],\n\t\t\tsamePage: [],\n\t\t\tsamePageWithHash: [],\n\t\t\tserverError: [],\n\t\t\ttransitionStart: [],\n\t\t\ttransitionEnd: [],\n\t\t\twillReplaceContent: []\n\t\t};\n\n\t\t// variable for id of element to scroll to after render\n\t\tthis.scrollToElement = null;\n\t\t// variable for promise used for preload, so no new loading of the same page starts while page is loading\n\t\tthis.preloadPromise = null;\n\t\t// variable for save options\n\t\tthis.options = options;\n\t\t// variable for plugins array\n\t\tthis.plugins = [];\n\t\t// variable for current transition object\n\t\tthis.transition = {};\n\t\t// variable for keeping event listeners from \"delegate\"\n\t\tthis.delegatedListeners = {};\n\n\t\t// make modules accessible in instance\n\t\tthis.cache = new _Cache2.default();\n\t\tthis.cache.swup = this;\n\t\tthis.loadPage = _loadPage2.default;\n\t\tthis.renderPage = _renderPage2.default;\n\t\tthis.triggerEvent = _triggerEvent2.default;\n\t\tthis.on = _on2.default;\n\t\tthis.off = _off2.default;\n\t\tthis.updateTransition = _updateTransition2.default;\n\t\tthis.getAnimationPromises = _getAnimationPromises2.default;\n\t\tthis.getPageData = _getPageData2.default;\n\t\tthis.log = function () {}; // here so it can be used by plugins\n\t\tthis.use = _plugins.use;\n\t\tthis.unuse = _plugins.unuse;\n\t\tthis.findPlugin = _plugins.findPlugin;\n\n\t\t// enable swup\n\t\tthis.enable();\n\t}\n\n\t_createClass(Swup, [{\n\t\tkey: 'enable',\n\t\tvalue: function enable() {\n\t\t\tvar _this = this;\n\n\t\t\t// check for Promise support\n\t\t\tif (typeof Promise === 'undefined') {\n\t\t\t\tconsole.warn('Promise is not supported');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// add event listeners\n\t\t\tthis.delegatedListeners.click = (0, _delegate2.default)(document, this.options.linkSelector, 'click', this.linkClickHandler.bind(this));\n\t\t\twindow.addEventListener('popstate', this.popStateHandler.bind(this));\n\n\t\t\t// initial save to cache\n\t\t\tvar page = (0, _helpers.getDataFromHtml)(document.documentElement.outerHTML, this.options.containers);\n\t\t\tpage.url = page.responseURL = (0, _helpers.getCurrentUrl)();\n\t\t\tif (this.options.cache) {\n\t\t\t\tthis.cache.cacheUrl(page);\n\t\t\t}\n\n\t\t\t// mark swup blocks in html\n\t\t\t(0, _helpers.markSwupElements)(document.documentElement, this.options.containers);\n\n\t\t\t// mount plugins\n\t\t\tthis.options.plugins.forEach(function (plugin) {\n\t\t\t\t_this.use(plugin);\n\t\t\t});\n\n\t\t\t// modify initial history record\n\t\t\twindow.history.replaceState(Object.assign({}, window.history.state, {\n\t\t\t\turl: window.location.href,\n\t\t\t\trandom: Math.random(),\n\t\t\t\tsource: 'swup'\n\t\t\t}), document.title, window.location.href);\n\n\t\t\t// trigger enabled event\n\t\t\tthis.triggerEvent('enabled');\n\n\t\t\t// add swup-enabled class to html tag\n\t\t\tdocument.documentElement.classList.add('swup-enabled');\n\n\t\t\t// trigger page view event\n\t\t\tthis.triggerEvent('pageView');\n\t\t}\n\t}, {\n\t\tkey: 'destroy',\n\t\tvalue: function destroy() {\n\t\t\tvar _this2 = this;\n\n\t\t\t// remove delegated listeners\n\t\t\tthis.delegatedListeners.click.destroy();\n\t\t\tthis.delegatedListeners.mouseover.destroy();\n\n\t\t\t// remove popstate listener\n\t\t\twindow.removeEventListener('popstate', this.popStateHandler.bind(this));\n\n\t\t\t// empty cache\n\t\t\tthis.cache.empty();\n\n\t\t\t// unmount plugins\n\t\t\tthis.options.plugins.forEach(function (plugin) {\n\t\t\t\t_this2.unuse(plugin);\n\t\t\t});\n\n\t\t\t// remove swup data atributes from blocks\n\t\t\t(0, _utils.queryAll)('[data-swup]').forEach(function (element) {\n\t\t\t\telement.removeAttribute('data-swup');\n\t\t\t});\n\n\t\t\t// remove handlers\n\t\t\tthis.off();\n\n\t\t\t// trigger disable event\n\t\t\tthis.triggerEvent('disabled');\n\n\t\t\t// remove swup-enabled class from html tag\n\t\t\tdocument.documentElement.classList.remove('swup-enabled');\n\t\t}\n\t}, {\n\t\tkey: 'linkClickHandler',\n\t\tvalue: function linkClickHandler(event) {\n\t\t\t// no control key pressed\n\t\t\tif (!event.metaKey && !event.ctrlKey && !event.shiftKey && !event.altKey) {\n\t\t\t\t// index of pressed button needs to be checked because Firefox triggers click on all mouse buttons\n\t\t\t\tif (event.button === 0) {\n\t\t\t\t\tthis.triggerEvent('clickLink', event);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tvar link = new _helpers.Link(event.delegateTarget);\n\t\t\t\t\tif (link.getAddress() == (0, _helpers.getCurrentUrl)() || link.getAddress() == '') {\n\t\t\t\t\t\t// link to the same URL\n\t\t\t\t\t\tif (link.getHash() != '') {\n\t\t\t\t\t\t\t// link to the same URL with hash\n\t\t\t\t\t\t\tthis.triggerEvent('samePageWithHash', event);\n\t\t\t\t\t\t\tvar element = document.querySelector(link.getHash());\n\t\t\t\t\t\t\tif (element != null) {\n\t\t\t\t\t\t\t\thistory.replaceState({\n\t\t\t\t\t\t\t\t\turl: link.getAddress() + link.getHash(),\n\t\t\t\t\t\t\t\t\trandom: Math.random(),\n\t\t\t\t\t\t\t\t\tsource: 'swup'\n\t\t\t\t\t\t\t\t}, document.title, link.getAddress() + link.getHash());\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// referenced element not found\n\t\t\t\t\t\t\t\tconsole.warn('Element for offset not found (' + link.getHash() + ')');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// link to the same URL without hash\n\t\t\t\t\t\t\tthis.triggerEvent('samePage', event);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// link to different url\n\t\t\t\t\t\tif (link.getHash() != '') {\n\t\t\t\t\t\t\tthis.scrollToElement = link.getHash();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// get custom transition from data\n\t\t\t\t\t\tvar customTransition = event.delegateTarget.getAttribute('data-swup-transition');\n\n\t\t\t\t\t\t// load page\n\t\t\t\t\t\tthis.loadPage({ url: link.getAddress(), customTransition: customTransition }, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// open in new tab (do nothing)\n\t\t\t\tthis.triggerEvent('openPageInNewTab', event);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'popStateHandler',\n\t\tvalue: function popStateHandler(event) {\n\t\t\tif (this.options.skipPopStateHandling(event)) return;\n\t\t\tvar link = new _helpers.Link(event.state ? event.state.url : window.location.pathname);\n\t\t\tif (link.getHash() !== '') {\n\t\t\t\tthis.scrollToElement = link.getHash();\n\t\t\t} else {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\tthis.triggerEvent('popState', event);\n\t\t\tthis.loadPage({ url: link.getAddress() }, event);\n\t\t}\n\t}]);\n\n\treturn Swup;\n}();\n\nexports.default = Swup;","let { assign, keys, values } = Object;\r\nlet { isArray, from, of } = Array;\r\n\r\n// Test the type of a value\r\nlet _is = (val, type) => (typeof val == type);\r\n\r\n// Is Instance Of\r\nlet _isInst = (ctor, obj) => (ctor instanceof obj);\r\nlet _type = type => { // Tweak of _is\r\n    return val => _is(val, type);\r\n};\r\n\r\nassign(_is, {\r\n    el: el => _isInst(el, Element) || _isInst(el, Document),\r\n    arrlike (obj) {\r\n        let len = _is(obj.length, \"number\") && obj.length;\r\n        return len == 0 || len > 0 && (len - 1) in obj;\r\n    },\r\n    class: obj => obj && obj._method && obj._class,\r\n    not: (type, ...args) => !_is[type](...args),\r\n    doc: ctor => _isInst(ctor, Document),\r\n    def: val => !_is(val, \"undefined\"),\r\n    undef: _type(\"undefined\"),\r\n    bool: _type(\"boolean\"),\r\n    fn: _type(\"function\"),\r\n    obj: _type(\"object\"),\r\n    num: _type(\"number\"),\r\n    str: _type(\"string\"),\r\n    nul: _type(\"null\"),\r\n    inst: _isInst, \r\n    arr: isArray,\r\n    _type\r\n});\r\n\r\n/**\r\n * @param  {Function} fn\r\n * @param  {Array<any>} args\r\n * @param  {Object} ctxt\r\n */\r\nlet _fnval = (fn, args, ctxt) => {\r\n    if (_is.not(\"fn\", fn) || \r\n        keys(fn.prototype || {}).length > 0) \r\n        { return fn; }\r\n    return fn.apply(ctxt, args);\r\n};\r\n\r\n// Argument names\r\nlet _argNames = fn => {\r\n    let args = fn.toString()\r\n        .match(/^[\\s(]*function[^(]*\\(([^)]*)\\)/)[1]\r\n        .replace(/\\/\\/.*?[\\r\\n]|\\/\\*(?:.|[\\r\\n])*?\\*\\//g, '')\r\n        .replace(/\\s+/g, '').split(',');\r\n    return args.length == 1 && !args[0] ? [] : args;\r\n};\r\n\r\n// Get or set a value in an Object, based on it's path\r\nlet _path = (obj, path, val) => {\r\n    path = path.toString().split(/[.,]/g);\r\n    if (_is.def(val)) {\r\n        if (path.length > 1) {\r\n            _path(obj[path.shift()], path, val);\r\n        } else { obj[path[0]] = val; }\r\n        return val;\r\n    } else {\r\n        path.forEach(_val => { obj = obj[_val]; });\r\n    }\r\n    return obj;\r\n};\r\n\r\n/* \r\n    Builds on path and adds more power, \r\n    * Allows for multiple paths one value\r\n    * Using Objects as paths and setting the values individually\r\n    * Access values as an Array, from multiple paths\r\n*/\r\nlet _attr = (obj, path, val) => {\r\n    if (_is.obj(path) && _is.not(\"arr\", path)) \r\n        { return assign(obj, path); }\r\n    else if (_is.arr(path)) {\r\n        if (_is.undef(val)) {\r\n            return path.map(_key => _path(obj, _key));\r\n        } else {\r\n            path.forEach(_key => { _path(obj, _key, val); });\r\n        }\r\n    } else { return _path(obj, path, val); }\r\n    return obj;\r\n};\r\n\r\n// A more efficient `new` keyword that allows for arrays to be passed as arguments\r\nlet _new = (ctor, args) => {\r\n    let F = function () { return ctor.apply(this, args); };\r\n    F.prototype = ctor.prototype;\r\n    return new F();\r\n};\r\n\r\nexport { _is, _fnval, _argNames, _path, _attr, _new, assign, keys, values, from, of };","// import _class from \"./class\";\nimport { _is, assign, _path, keys } from \"./util\";\n// const { _get, _alias } = _class;\n/*import _global from './global';\nimport _event from './event';\nimport anime from \"animejs\";\nconst { createElement, documentElement } = document;\n\nlet Ele;\nlet tagRE = /^<([\\w-])\\s*\\/?>(?:<\\/\\1>|)$/;\nlet _cssNumber = [\"column-count\", \"columns\", \"font-weight\", \"line-height\", \"opacity\", \"z-index\", \"zoom\"];\nlet _qsa = (dom, sel) => Ele(...dom.querySelectorAll(sel));\n\n// The matches() method checks to see if the Element would be selected by the provided selectorString -- in other words -- checks if the element \"is\" the selector.\nlet _matches = (ele, sel) => {\n    let matchSel = ele.matches || ele.msMatchesSelector || ele.webkitMatchesSelector;\n    if (matchSel) return matchSel.call(ele, sel);\n};\n\n// Check if the parent node contains the given DOM node. Returns false if both are the same node.\nlet _contains = (parent, node) => {\n    if (parent.contains) return parent !== node && parent.contains(node);\n    while (node && (node = node.parentNode))\n        if (node === parent) return true;\n    return false;\n};\n\n// Creates elements\nlet _createElem = sel => {\n    let el = \"div\";\n    if (_is.str(sel) && tagRE.test(sel)) {\n        el = sel.replace(tagRE, \"$1\")\n        return createElement(el);\n    }\n};\n\n// Element selector\nlet _elem = sel => {\n    if (_is.inst(sel, Ele)) { return sel.ele; }\n    else if (_is.arr(sel) || _is.inst(sel, NodeList)) { return [...sel]; }\n    else if (_is.el(sel)) { return [sel]; }\n    else if (tagRE.test(sel)) { return [_createElem(sel)]; }\n    return _qsa(document, sel);\n};\n\nlet arrProto = _alias(Array.prototype, (val, ...args) => {\n    args = args.map(v => _is.fn(v) ? v.bind(this) : v, this);\n    let _val = val.apply(this, args);\n    return _is.inst(_val, Ele) ? Ele(_val) : (_is.undef(_val) ? this : _val);\n});\n\nlet _filter = (nodes, sel) => _is.nul(sel) ? Ele(nodes) : Ele(nodes).filter(sel);\nlet _uniq = arr => { \n    return arrProto.filter.call(arr, (val, idx) => arr.indexOf(val) == idx); \n};\n\nlet _children = el => {\n    return 'children' in el ? arrProto.slice.call(el.children) :\n        arrProto.map.call(el.childNodes, node => { \n            if (node.nodeType == 1) return node; \n        });\n}; \n\nlet _maybeAddPx = (name, val) => {\n    return (_is.num(val) && _cssNumber.includes(name)) ? `${val}px` : val;\n};\n\n// Element Object [Based on Zepto.js]\nEle = _class(_event, arrProto, {\n    init(sel = '') {\n        this.sel = _is.inst(sel, Ele) ? sel.ele : sel; // Selector\n        this.ele = _elem(sel); // Element\n\n        for (let i = 0; i < this.len; i++) { this[i] = this.ele[i]; }\n\n        this.timeline = anime.timeline({\n            targets: this.ele,\n            autoplay: false\n        });\n\n        _global.on(\"ready load\", () => {\n            this.emit(\"ready load\", Ele);\n        }, this);\n    },\n    \n    on($super, evt, ...args) {\n        $super(evt, ...args);\n        let $evt, emit = this.emit;\n        if (_is.undef(evt)) { return; } // If there is no event break\n        if (_is.str(evt)) { evt = evt.split(/\\s/g); }\n        if (_is.not(\"arr\", evt) && _is.not(\"obj\", evt)) { evt = [evt]; } // Set evt to an array\n        \n        // Added support for native:events\n        keys(evt).forEach(key => {\n            $evt = evt[key];\n            if (/native:/i.test($evt)) { \n                this.each(el => {\n                    el.addEventListener(\n                        $evt.replace(/native:/i, \"\"), \n                        (..._args) => { emit($evt, ..._args); }\n                    );\n                });\n            }\n        }, this);\n        return this;\n    },\n\n    ready(fn) { return this.on(\"ready load\", fn, this); },\n    length: _get(\"ele.length\"),\n    each(fn) {\n        arrProto.call(this, (el, idx) => fn.call(el, el, idx) != false);\n        return this;\n    },\n\n    get(idx) {\n        return _is.undef(idx) ? this.slice() : this[idx >= 0 ? idx : idx + this.length];\n    },\n    nth: _get(\"get\"),\n\n    len() { return this.length; },\n    size() { return this.len(); },\n    toArray() { return this.get(); },\n    remove() {\n        return this.each(el => {\n            if (el.parentNode != null)\n                el.parentNode.removeChild(el);\n        });\n    },\n\n    not(sel) {\n        let excludes;\n        return Ele(\n            this.reduce((acc, el, idx) => {\n                if (_is.fn(sel) && _is.def(sel.call)) {\n                    if (!sel.call(el, idx, el)) acc.push(el);\n                } else {\n                    excludes = _is.str(sel) ? this.filter(sel) :\n                        (_is.arrlike(sel) && _is.fn(sel.item)) ? arrProto.slice.call(sel) : Ele(sel);\n                    if (excludes.indexOf(el) < 0) acc.push(el);\n                }\n                return acc;\n            }, [])\n        );\n    },\n\n    filter(sel) {\n        if (_is.fn(sel)) return this.not(this.not(sel));\n        return arrProto.filter.call(this, ele => _matches(ele, sel), this);\n    },\n\n    has(sel) {\n        return this.filter(() => {\n            return _is.obj(sel) ? _contains(this, sel) : Ele(this).find(sel).size();\n        });\n    },\n\n    eq(idx) {\n        return idx == -1 ? this.slice(idx) : this.slice(idx, +idx + 1);\n    },\n\n    first() {\n        var el = this.get(0)\n        return el && !_is.obj(el) ? el : Ele(el)\n    },\n\n    last() {\n        let el = this.get(-1);\n        return el && !_is.obj(el) ? el : Ele(el)\n    },\n\n    find(sel) {\n        let result, $this = this;\n        if (!sel) { result = Ele(); }\n        else if (_is.obj(sel)) {\n            result = Ele(sel).filter((_, el) => {\n                return arrProto.some.call($this, parent => _contains(parent, el));\n            });\n        } else if (this.len() == 1) { result = Ele(_qsa(this[0], sel)); }\n        else { result = this.map(() => _qsa(this, sel)); }\n        return result;\n    },\n\n    closest(sel, ctxt) {\n        let list = _is.obj(sel) && Ele(sel);\n        return Ele(\n            this.reduce((acc, ele) => {\n                do {\n                    if (list ? list.indexOf(ele) >= 0 : _matches(ele, sel)) break;\n                    ele = ele != ctxt && _is.not(\"doc\", ele) && ele.parentNode;\n                } while (ele !== null && ele.nodeType === 1);\n                if (ele && acc.indexOf(ele) < 0) acc.push(ele);\n                return acc;\n            }, [])\n        );\n    },\n\n    parents(sel) {\n        let ancestors = [], nodes = this;\n        while (nodes.length > 0) {\n            nodes = nodes.map(el => {\n                if ((el = el.parentNode) && !_is.doc(el) && ancestors.indexOf(el) < 0) {\n                    ancestors.push(el);\n                    return el;\n                }\n            });\n        }\n        return _filter(ancestors, sel);\n    },\n\n    // `pluck`; based on underscore.js, but way more powerful\n    pluck(prop) { return this.map(el => _path(el, prop)); },\n    parent(sel) {\n        return _filter(_uniq(this.pluck('parentNode')), sel);\n    },\n\n    children (sel) {\n        return _filter(this.map(el => _children(el)), sel);\n    },\n\n    contents () {\n        return this.map(el => el.contentDocument || arrProto.slice.call(el.childNodes));\n    },\n    \n    siblings (sel) {\n        return _filter(this.map(el => \n            arrProto.filter.call(\n                _children(el.parentNode), \n                child => (child != el)\n            )\n        ), sel);\n    },\n\n    replaceWith: content => this.before(content).remove(),\n    clone: () => this.map(el => el.cloneNode(true)),\n\n    toggle(opt) {\n        return this.each(el => {\n            let _el = Ele(el);\n            let _opt = opt || el.style(\"display\") == \"none\";\n            _el[_opt ? \"show\" : \"hide\"]();\n        });\n    },\n\n    prev: sel => Ele(this.pluck('previousElementSibling')).filter(sel || '*'),\n    next: sel => Ele(this.pluck('nextElementSibling')).filter(sel || '*'),\n    html(...args) {\n        let [html] = args;\n        return args.length ?\n            this.each((el, idx) => {\n                let originHtml = el.innerHTML;\n                Ele(el).empty().append(_fnval(html, [idx, originHTML], el));\n            }) : (this.length ? this.get(0).innerHTML : null);\n    },\n    text(...args) {\n        let [text] = args;\n        return args.length ?\n            this.each((el, idx) => {\n                let newText = _fnval(text, [idx, el.textContent], el);\n                el.textContent = _is.nul(newText) ? '' : `${newText}`;\n            }) : (this.length ? this.pluck('textContent').join(\"\") : null);\n    },\n    attr(name, val) {\n        let result;\n        return (_is.str(name) && _is.undef(val)) ?\n            (this.length && this.get(0).nodeType == 1 && \n                (result = this.get(0).getAttribute(name)) != null ? result : undefined) :\n            this.each((el, idx) => {\n                if (el.nodeType !== 1) return\n                if (_is.obj(name)) for (key in name) setAttribute(el, key, name[key])\n                else setAttribute(el, name, funcArg(el, val, idx, el.getAttribute(name)))\n            });\n    },\n    removeAttr: function (name) {\n        return this.each(function () {\n        this.nodeType === 1 && name.split(' ').forEach(function (attribute) {\n            setAttribute(this, attribute)\n        }, this)\n        })\n    },\n    prop: function (name, value) {\n        name = propMap[name] || name\n        return (typeof name == 'string' && !(1 in arguments)) ?\n            (this[0] && this[0][name]) :\n            this.each(function (idx) {\n                if (isObject(name)) for (key in name) this[propMap[key] || key] = name[key]\n                else this[name] = funcArg(this, value, idx, this[name])\n            })\n    },\n    removeProp: function (name) {\n        name = propMap[name] || name\n        return this.each(function () { delete this[name] })\n    },\n    data: function (name, value) {\n        let attrName = 'data-' + name.replace(capitalRE, '-$1').toLowerCase()\n\n        let data = (1 in arguments) ?\n            this.attr(attrName, value) :\n            this.attr(attrName)\n\n        return data !== null ? deserializeValue(data) : undefined\n    },\n    val: function (value) {\n        if (0 in arguments) {\n            if (value == null) value = \"\"\n            return this.each(function (idx) {\n                this.value = funcArg(this, value, idx, this.value)\n            })\n        } else {\n            return this[0] && (this[0].multiple ?\n                $(this[0]).find('option').filter(function () { return this.selected }).pluck('value') :\n                this[0].value)\n        }\n    },\n    offset: function (coordinates) {\n        if (coordinates) return this.each(function (index) {\n            let $this = $(this),\n                coords = funcArg(this, coordinates, index, $this.offset()),\n                parentOffset = $this.offsetParent().offset(),\n                props = {\n                    top: coords.top - parentOffset.top,\n                    left: coords.left - parentOffset.left\n                }\n\n            if ($this.css('position') == 'static') props['position'] = 'relative'\n            $this.css(props)\n        })\n        if (!this.length) return null\n        if (document.documentElement !== this[0] && !$.contains(document.documentElement, this[0]))\n            return { top: 0, left: 0 }\n        let obj = this[0].getBoundingClientRect()\n        return {\n            left: obj.left + window.pageXOffset,\n            top: obj.top + window.pageYOffset,\n            width: Math.round(obj.width),\n            height: Math.round(obj.height)\n        }\n    },\n    css (...args) {\n        let [prop, val] = args, css = '', key;\n        if (args.length < 2) {\n            let el = this.get(0);\n            if (!el) return;\n            if (_is.str(prop)) {\n                return el.style[camelize(prop)] || window.getComputedStyle(el, '').getPropertyValue(prop)\n            } else if (_is.arr(prop)) {\n                let props = {};\n                let computedStyle = window.getComputedStyle(el, '')\n                prop.forEach(_prop => {\n                    props[_prop] = (el.style[camelize(_prop)] || computedStyle.getPropertyValue(_prop))\n                });\n                return props;\n            }\n        }\n\n        if (_is.str(prop)) {\n            if (!val && val != 0) {\n                this.each(el => { el.style.removeProperty(dasherize(prop)) })\n            } else {\n                css = dasherize(prop) + \":\" + maybeAddPx(prop, val);\n            }\n        } else {\n            for (key in prop) {\n                if (!prop[key] && prop[key] != 0) {\n                    this.each(el => { el.style.removeProperty(dasherize(key)); });\n                } else {\n                    css += dasherize(key) + ':' + maybeAddPx(key, prop[key]) + ';';\n                }\n            }\n        }\n\n        return this.each(el => { el.style.cssText += ';' + css; });\n    },\n\n    show: () => this.style(\"display\", \"\"),\n    hide: () => this.style(\"display\", \"none\"),\n    empty: () => this.each(el => { el.innerHTML = ''; }),\n    index: function (element) {\n        return element ? this.indexOf($(element)[0]) : this.parent().children().indexOf(this[0])\n    },\n\n    x(el) { return this.clientRect(el).x; },\n    y(el) { return this.clientRect(el).y; },\n    width(el) { return this.clientRect(el).width; },\n    height(el) { return this.clientRect(el).height; },\n    clientRect(el) { return el.getBoundingClientRect(); },\n    style(ele, css = {}) {\n        Object.assign(ele.style, css);\n        return this;\n    },\n    animate(opt = {}, offset) {\n        let tl = this.timeline;\n        tl.add(opt, offset);\n        _is.def(opt.play) && (opt.play && tl.play() || tl.pause());\n        return this;\n    },\n    click(fn = () => { }) {\n        return this.each(function (ele) {\n            ele.onclick = fn.bind(this);\n        }, this);\n    },\n    hover(fn = () => { }) {\n        return this.each(function (ele) {\n            ele.onmouseover = fn.bind(this);\n        }, this);\n    },\n    mousemove(fn = () => { }) {\n        return this.each(function (ele) {\n            ele.addEventListener(\"mousemove\", fn.bind(this));\n        }, this);\n    },\n    intersect($this, el) {\n        return (\n            this.x($this) < this.x(el) + this.width(el) &&\n            this.x(el) < this.x($this) + this.width($this) &&\n            this.y($this) < this.y(el) + this.height(el) &&\n            this.y(el) < this.y($this) + this.height($this)\n        );\n    }\n}, () => {\n    return `blur focus focusin focusout resize scroll click dblclick \n\t        mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \n            change select submit keydown keypress keyup contextmenu`.split(\" \")\n     .reduce((acc, name) => {\n\t    // Handle event binding\n        acc[name] = (data, fn) => {\n            return arguments.length > 0 ?\n                this.on(name, null, data, fn) :\n                this.emit(name);\n        };\n    }, {\n        hover(fnOver, fnOut) {\n            return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n        }\n    });\n}, () => {\n    /*\n    // Generate the `width` and `height` functions\n    ['width', 'height'].forEach(function (dimension) {\n        var dimensionProperty =\n            dimension.replace(/./, function (m) { return m[0].toUpperCase() })\n\n        $.fn[dimension] = function (value) {\n            var offset, el = this[0]\n            if (value === undefined) return isWindow(el) ? el['inner' + dimensionProperty] :\n                isDocument(el) ? el.documentElement['scroll' + dimensionProperty] :\n                    (offset = this.offset()) && offset[dimension]\n            else return this.each(function (idx) {\n                el = $(this)\n                el.css(dimension, funcArg(this, value, idx, el[dimension]()))\n            })\n        }\n    })\n\n    function traverseNode(node, fun) {\n        fun(node)\n        for (var i = 0, len = node.childNodes.length; i < len; i++)\n            traverseNode(node.childNodes[i], fun)\n    }\n\n    // Generate the `after`, `prepend`, `before`, `append`,\n    // `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.\n    adjacencyOperators.forEach(function (operator, operatorIndex) {\n        var inside = operatorIndex % 2 //=> prepend, append\n\n        $.fn[operator] = function () {\n            // arguments can be nodes, arrays of nodes, Zepto objects and HTML strings\n            var argType, nodes = $.map(arguments, function (arg) {\n                var arr = []\n                argType = type(arg)\n                if (argType == \"array\") {\n                    arg.forEach(function (el) {\n                        if (el.nodeType !== undefined) return arr.push(el)\n                        else if ($.zepto.isZ(el)) return arr = arr.concat(el.get())\n                        arr = arr.concat(zepto.fragment(el))\n                    })\n                    return arr\n                }\n                return argType == \"object\" || arg == null ?\n                    arg : zepto.fragment(arg)\n            }),\n                parent, copyByClone = this.length > 1\n            if (nodes.length < 1) return this\n\n            return this.each(function (_, target) {\n                parent = inside ? target : target.parentNode\n\n                // convert all methods to a \"before\" operation\n                target = operatorIndex == 0 ? target.nextSibling :\n                    operatorIndex == 1 ? target.firstChild :\n                        operatorIndex == 2 ? target :\n                            null\n\n                var parentInDocument = $.contains(document.documentElement, parent)\n\n                nodes.forEach(function (node) {\n                    if (copyByClone) node = node.cloneNode(true)\n                    else if (!parent) return $(node).remove()\n\n                    parent.insertBefore(node, target)\n                    if (parentInDocument) traverseNode(node, function (el) {\n                        if (el.nodeName != null && el.nodeName.toUpperCase() === 'SCRIPT' &&\n                            (!el.type || el.type === 'text/javascript') && !el.src) {\n                            var target = el.ownerDocument ? el.ownerDocument.defaultView : window\n                            target['eval'].call(target, el.innerHTML)\n                        }\n                    })\n                })\n            })\n        }\n\n        // after    => insertAfter\n        // prepend  => prependTo\n        // before   => insertBefore\n        // append   => appendTo\n        $.fn[inside ? operator + 'To' : 'insert' + (operatorIndex ? 'Before' : 'After')] = function (html) {\n            $(html)[operator](this)\n            return this\n        }\n    return [\"before\"].reduce(() => {\n\n    })\n});*/\n\nexport default class El {\n    constructor(el) {\n        this.el = (el instanceof El) ? el.el : [...document.querySelectorAll(el)];\n    }\n\n    each(fn = () => {}) {\n        this.el.forEach(fn.bind(this), this);\n        return this;\n    }\n\n    set(prop, val) {\n        return this.each(el => {\n            switch (typeof val) {\n                case 'object':\n                    if (typeof el[prop] != 'object') this.el[prop] = {};\n                    assign(el[prop], val);\n                    break;\n                case 'undefined':\n                    el = prop;\n                    break;\n                default:\n                    el[prop] = val;\n            }\n        });\n    }\n};\n\n// export default Ele;\n","/*\n// Feature detection\n//\nhttps://www.smashingmagazine.com/2018/10/smart-bundling-legacy-code-browsers/https://github.com/WICG/EventListenerOptions/blob/gh-pages/EventListenerOptions.polyfill.js\nvar passiveIfSupported = false;\n\ntry {\n\twindow.addEventListener(\"test\", null, Object.defineProperty({}, \"passive\", { get: function() { passiveIfSupported = { passive: true }; } }));\n} catch(err) {}\n\nwindow.addEventListener('scroll', function(event) {\n\t// do something\n\t// can't use event.preventDefault();\n}, passiveIfSupported ); */\n\nimport swup from \"swup\";\nimport el from \"./components/ele\";\n// import scrollPlugin from \"@swup/scroll-plugin\";\n// import slideTheme from '@swup/slide-theme';\n// import preload from '@swup/preload-plugin';\n// import anime from \"anime\";\n\nlet ele = new el(\"body\");\nele.set(\"style\", {});\nfetch(\"/assets/app.js\")\n\t.then(console.log);\n\nconsole.log({\n\tmessage: \"Hello\"\n});\n\nnew swup({\n\trequestHeaders: {\n\t\t\"X-Requested-With\": \"swup\", // So we can tell request comes from swup\n\t\t\"x-partial\": \"swup\" // Request a partial html page\n\t}\n});\n"],"file":"../js/app.min.js"}